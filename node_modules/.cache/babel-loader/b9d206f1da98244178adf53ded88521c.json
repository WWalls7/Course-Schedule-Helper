{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/compactAppointmentsHelper.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CompactAppointmentsHelper = void 0;\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _button = require(\"../button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _function_template = require(\"../../core/templates/function_template\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _deferred2 = _interopRequireDefault(_deferred);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar APPOINTMENT_COLLECTOR_CLASS = \"dx-scheduler-appointment-collector\";\nvar COMPACT_APPOINTMENT_COLLECTOR_CLASS = APPOINTMENT_COLLECTOR_CLASS + \"-compact\";\nvar APPOINTMENT_COLLECTOR_CONTENT_CLASS = APPOINTMENT_COLLECTOR_CLASS + \"-content\";\nvar WEEK_VIEW_COLLECTOR_OFFSET = 5;\nvar COMPACT_THEME_WEEK_VIEW_COLLECTOR_OFFSET = 1;\n\nvar CompactAppointmentsHelper = exports.CompactAppointmentsHelper = function () {\n  function CompactAppointmentsHelper(instance) {\n    _classCallCheck(this, CompactAppointmentsHelper);\n\n    this.instance = instance;\n    this.elements = [];\n  }\n\n  _createClass(CompactAppointmentsHelper, [{\n    key: \"render\",\n    value: function (options) {\n      var isCompact = options.isCompact,\n          items = options.items,\n          buttonColor = options.buttonColor;\n\n      var template = this._createTemplate(items.data.length, isCompact);\n\n      var button = this._createCompactButton(template, options);\n\n      var $button = button.$element();\n\n      this._makeBackgroundColor($button, items.colors, buttonColor);\n\n      this._makeBackgroundDarker($button);\n\n      this.elements.push($button);\n      $button.data(\"items\", this._createAppointmentsData(items));\n      return $button;\n    }\n  }, {\n    key: \"clear\",\n    value: function () {\n      this.elements.forEach(function (button) {\n        button.detach();\n        button.remove();\n      });\n      this.elements = [];\n    }\n  }, {\n    key: \"_createAppointmentsData\",\n    value: function (items) {\n      return items.data.map(function (item, index) {\n        return {\n          data: item,\n          color: items.colors[index],\n          settings: items.settings[index]\n        };\n      });\n    }\n  }, {\n    key: \"_onButtonClick\",\n    value: function (e, options) {\n      var $button = (0, _renderer2.default)(e.element);\n      this.instance.showAppointmentTooltipCore($button, $button.data(\"items\"), this._getExtraOptionsForTooltip(options));\n    }\n  }, {\n    key: \"_getExtraOptionsForTooltip\",\n    value: function (options) {\n      return {\n        clickEvent: this._clickEvent(options.onAppointmentClick).bind(this),\n        dragBehavior: options.allowDrag && this._createTooltipDragBehavior(options).bind(this),\n        dropDownAppointmentTemplate: this.instance.option().dropDownAppointmentTemplate,\n        isButtonClick: true\n      };\n    }\n  }, {\n    key: \"_clickEvent\",\n    value: function (onAppointmentClick) {\n      var _this = this;\n\n      return function (e) {\n        var config = {\n          itemData: e.itemData.data,\n          itemElement: e.itemElement\n        };\n        var createClickEvent = (0, _extend.extendFromObject)(_this.instance.fire(\"mapAppointmentFields\", config), e, false);\n        delete createClickEvent.itemData;\n        delete createClickEvent.itemIndex;\n        delete createClickEvent.itemElement;\n        onAppointmentClick(createClickEvent);\n      };\n    }\n  }, {\n    key: \"_createTooltipDragBehavior\",\n    value: function (options) {\n      var _this2 = this;\n\n      return function (e) {\n        var dragElement;\n        var $element = (0, _renderer2.default)(e.element);\n\n        var dragBehavior = _this2.instance.getWorkSpace().dragBehavior;\n\n        dragBehavior.addTo($element, {\n          filter: \".\".concat(_constants.LIST_ITEM_CLASS),\n          container: _this2.instance.$element().find(\".\".concat(_constants.FIXED_CONTAINER_CLASS)),\n          cursorOffset: function () {\n            var $dragElement = (0, _renderer2.default)(dragElement);\n            return {\n              x: $dragElement.width() / 2,\n              y: $dragElement.height() / 2\n            };\n          },\n          dragTemplate: function () {\n            return dragElement;\n          },\n          onDragStart: function (e) {\n            var event = e.event;\n            var itemData = (0, _renderer2.default)(e.itemElement).data(_constants.LIST_ITEM_DATA_KEY);\n\n            if (itemData && !itemData.data.disabled) {\n              event.data = event.data || {};\n              event.data.itemElement = dragElement = _this2._createDragAppointment(itemData.data, itemData.settings);\n              dragBehavior.onDragStart(event.data);\n\n              _translator2.default.resetPosition((0, _renderer2.default)(dragElement));\n            }\n          },\n          onDragEnd: function (e) {\n            var itemData = (0, _renderer2.default)(e.itemElement).data(_constants.LIST_ITEM_DATA_KEY);\n\n            if (itemData && !itemData.data.disabled) {\n              dragBehavior.onDragEnd(e);\n            }\n          }\n        });\n      };\n    }\n  }, {\n    key: \"_createDragAppointment\",\n    value: function (itemData, settings) {\n      var appointments = this.instance.getAppointmentsInstance();\n      var appointmentIndex = appointments.option(\"items\").length;\n      settings.isCompact = false;\n      settings.virtual = false;\n\n      appointments._renderItem(appointmentIndex, {\n        itemData: itemData,\n        settings: [settings]\n      });\n\n      return appointments._findItemElementByItem(itemData)[0];\n    }\n  }, {\n    key: \"_getCollectorOffset\",\n    value: function (width, cellWidth) {\n      return cellWidth - width - this._getCollectorRightOffset();\n    }\n  }, {\n    key: \"_getCollectorRightOffset\",\n    value: function () {\n      return this.instance.getRenderingStrategyInstance()._isCompactTheme() ? COMPACT_THEME_WEEK_VIEW_COLLECTOR_OFFSET : WEEK_VIEW_COLLECTOR_OFFSET;\n    }\n  }, {\n    key: \"_makeBackgroundDarker\",\n    value: function (button) {\n      button.css(\"boxShadow\", \"inset \".concat(button.get(0).getBoundingClientRect().width, \"px 0 0 0 rgba(0, 0, 0, 0.3)\"));\n    }\n  }, {\n    key: \"_makeBackgroundColor\",\n    value: function ($button, colors, color) {\n      _deferred2.default.when.apply(null, colors).done(function () {\n        this._makeBackgroundColorCore($button, color, arguments);\n      }.bind(this));\n    }\n  }, {\n    key: \"_makeBackgroundColorCore\",\n    value: function ($button, color, itemsColors) {\n      var paintButton = true;\n      var currentItemColor;\n      color && color.done(function (color) {\n        if (itemsColors.length) {\n          currentItemColor = itemsColors[0];\n\n          for (var i = 1; i < itemsColors.length; i++) {\n            if (currentItemColor !== itemsColors[i]) {\n              paintButton = false;\n              break;\n            }\n\n            currentItemColor = color;\n          }\n        }\n\n        color && paintButton && $button.css(\"backgroundColor\", color);\n      }.bind(this));\n    }\n  }, {\n    key: \"_setPosition\",\n    value: function (element, position) {\n      _translator2.default.move(element, {\n        top: position.top,\n        left: position.left\n      });\n    }\n  }, {\n    key: \"_createCompactButton\",\n    value: function (template, options) {\n      var _this3 = this;\n\n      var $button = this._createCompactButtonElement(options);\n\n      return this.instance._createComponent($button, _button2.default, {\n        type: \"default\",\n        width: options.width,\n        height: options.height,\n        onClick: function (e) {\n          return _this3._onButtonClick(e, options);\n        },\n        template: this._renderTemplate(template, options.items, options.isCompact)\n      });\n    }\n  }, {\n    key: \"_createCompactButtonElement\",\n    value: function (_ref) {\n      var isCompact = _ref.isCompact,\n          $container = _ref.$container,\n          width = _ref.width,\n          coordinates = _ref.coordinates,\n          applyOffset = _ref.applyOffset,\n          cellWidth = _ref.cellWidth;\n      var result = (0, _renderer2.default)(\"<div>\").addClass(APPOINTMENT_COLLECTOR_CLASS).toggleClass(COMPACT_APPOINTMENT_COLLECTOR_CLASS, isCompact).appendTo($container);\n      var offset = applyOffset ? this._getCollectorOffset(width, cellWidth) : 0;\n\n      this._setPosition(result, {\n        top: coordinates.top,\n        left: coordinates.left + offset\n      });\n\n      return result;\n    }\n  }, {\n    key: \"_renderTemplate\",\n    value: function (template, items, isCompact) {\n      return new _function_template.FunctionTemplate(function (options) {\n        return template.render({\n          model: {\n            appointmentCount: items.data.length,\n            isCompact: isCompact\n          },\n          container: options.container\n        });\n      });\n    }\n  }, {\n    key: \"_createTemplate\",\n    value: function (count, isCompact) {\n      this._initButtonTemplate(count, isCompact);\n\n      return this.instance._getAppointmentTemplate(\"appointmentCollectorTemplate\");\n    }\n  }, {\n    key: \"_initButtonTemplate\",\n    value: function (count, isCompact) {\n      var _this4 = this;\n\n      this.instance._defaultTemplates.appointmentCollector = new _function_template.FunctionTemplate(function (options) {\n        return _this4._createButtonTemplate(count, (0, _renderer2.default)(options.container), isCompact);\n      });\n    }\n  }, {\n    key: \"_createButtonTemplate\",\n    value: function (appointmentCount, element, isCompact) {\n      var text = isCompact ? appointmentCount : _message2.default.getFormatter(\"dxScheduler-moreAppointments\")(appointmentCount);\n      return element.append((0, _renderer2.default)(\"<span>\").text(text)).addClass(APPOINTMENT_COLLECTOR_CONTENT_CLASS);\n    }\n  }]);\n\n  return CompactAppointmentsHelper;\n}();","map":{"version":3,"sources":["C:/Users/Swizzle/Desktop/SE Project/Application/csh/node_modules/devextreme/ui/scheduler/compactAppointmentsHelper.js"],"names":["Object","defineProperty","exports","value","CompactAppointmentsHelper","_renderer","require","_renderer2","_interopRequireDefault","_button","_button2","_translator","_translator2","_message","_message2","_function_template","_deferred","_deferred2","_extend","_constants","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","APPOINTMENT_COLLECTOR_CLASS","COMPACT_APPOINTMENT_COLLECTOR_CLASS","APPOINTMENT_COLLECTOR_CONTENT_CLASS","WEEK_VIEW_COLLECTOR_OFFSET","COMPACT_THEME_WEEK_VIEW_COLLECTOR_OFFSET","elements","options","isCompact","items","buttonColor","template","_createTemplate","data","button","_createCompactButton","$button","$element","_makeBackgroundColor","colors","_makeBackgroundDarker","push","_createAppointmentsData","forEach","detach","remove","map","item","index","color","settings","e","default","element","showAppointmentTooltipCore","_getExtraOptionsForTooltip","clickEvent","_clickEvent","onAppointmentClick","bind","dragBehavior","allowDrag","_createTooltipDragBehavior","dropDownAppointmentTemplate","option","isButtonClick","_this","config","itemData","itemElement","createClickEvent","extendFromObject","fire","itemIndex","_this2","dragElement","getWorkSpace","addTo","filter","concat","LIST_ITEM_CLASS","container","find","FIXED_CONTAINER_CLASS","cursorOffset","$dragElement","x","width","y","height","dragTemplate","onDragStart","event","LIST_ITEM_DATA_KEY","disabled","_createDragAppointment","resetPosition","onDragEnd","appointments","getAppointmentsInstance","appointmentIndex","virtual","_renderItem","_findItemElementByItem","cellWidth","_getCollectorRightOffset","getRenderingStrategyInstance","_isCompactTheme","css","get","getBoundingClientRect","when","apply","done","_makeBackgroundColorCore","arguments","itemsColors","paintButton","currentItemColor","position","move","top","left","_this3","_createCompactButtonElement","_createComponent","type","onClick","_onButtonClick","_renderTemplate","_ref","$container","coordinates","applyOffset","result","addClass","toggleClass","appendTo","offset","_getCollectorOffset","_setPosition","FunctionTemplate","render","model","appointmentCount","count","_initButtonTemplate","_getAppointmentTemplate","_this4","_defaultTemplates","appointmentCollector","_createButtonTemplate","text","getFormatter","append"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/compactAppointmentsHelper.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.CompactAppointmentsHelper = void 0;\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _button = require(\"../button\");\r\nvar _button2 = _interopRequireDefault(_button);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _function_template = require(\"../../core/templates/function_template\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _deferred2 = _interopRequireDefault(_deferred);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _constants = require(\"./constants\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar APPOINTMENT_COLLECTOR_CLASS = \"dx-scheduler-appointment-collector\";\r\nvar COMPACT_APPOINTMENT_COLLECTOR_CLASS = APPOINTMENT_COLLECTOR_CLASS + \"-compact\";\r\nvar APPOINTMENT_COLLECTOR_CONTENT_CLASS = APPOINTMENT_COLLECTOR_CLASS + \"-content\";\r\nvar WEEK_VIEW_COLLECTOR_OFFSET = 5;\r\nvar COMPACT_THEME_WEEK_VIEW_COLLECTOR_OFFSET = 1;\r\nvar CompactAppointmentsHelper = exports.CompactAppointmentsHelper = function() {\r\n    function CompactAppointmentsHelper(instance) {\r\n        _classCallCheck(this, CompactAppointmentsHelper);\r\n        this.instance = instance;\r\n        this.elements = []\r\n    }\r\n    _createClass(CompactAppointmentsHelper, [{\r\n        key: \"render\",\r\n        value: function(options) {\r\n            var isCompact = options.isCompact,\r\n                items = options.items,\r\n                buttonColor = options.buttonColor;\r\n            var template = this._createTemplate(items.data.length, isCompact);\r\n            var button = this._createCompactButton(template, options);\r\n            var $button = button.$element();\r\n            this._makeBackgroundColor($button, items.colors, buttonColor);\r\n            this._makeBackgroundDarker($button);\r\n            this.elements.push($button);\r\n            $button.data(\"items\", this._createAppointmentsData(items));\r\n            return $button\r\n        }\r\n    }, {\r\n        key: \"clear\",\r\n        value: function() {\r\n            this.elements.forEach(function(button) {\r\n                button.detach();\r\n                button.remove()\r\n            });\r\n            this.elements = []\r\n        }\r\n    }, {\r\n        key: \"_createAppointmentsData\",\r\n        value: function(items) {\r\n            return items.data.map(function(item, index) {\r\n                return {\r\n                    data: item,\r\n                    color: items.colors[index],\r\n                    settings: items.settings[index]\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onButtonClick\",\r\n        value: function(e, options) {\r\n            var $button = (0, _renderer2.default)(e.element);\r\n            this.instance.showAppointmentTooltipCore($button, $button.data(\"items\"), this._getExtraOptionsForTooltip(options))\r\n        }\r\n    }, {\r\n        key: \"_getExtraOptionsForTooltip\",\r\n        value: function(options) {\r\n            return {\r\n                clickEvent: this._clickEvent(options.onAppointmentClick).bind(this),\r\n                dragBehavior: options.allowDrag && this._createTooltipDragBehavior(options).bind(this),\r\n                dropDownAppointmentTemplate: this.instance.option().dropDownAppointmentTemplate,\r\n                isButtonClick: true\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_clickEvent\",\r\n        value: function(onAppointmentClick) {\r\n            var _this = this;\r\n            return function(e) {\r\n                var config = {\r\n                    itemData: e.itemData.data,\r\n                    itemElement: e.itemElement\r\n                };\r\n                var createClickEvent = (0, _extend.extendFromObject)(_this.instance.fire(\"mapAppointmentFields\", config), e, false);\r\n                delete createClickEvent.itemData;\r\n                delete createClickEvent.itemIndex;\r\n                delete createClickEvent.itemElement;\r\n                onAppointmentClick(createClickEvent)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createTooltipDragBehavior\",\r\n        value: function(options) {\r\n            var _this2 = this;\r\n            return function(e) {\r\n                var dragElement;\r\n                var $element = (0, _renderer2.default)(e.element);\r\n                var dragBehavior = _this2.instance.getWorkSpace().dragBehavior;\r\n                dragBehavior.addTo($element, {\r\n                    filter: \".\".concat(_constants.LIST_ITEM_CLASS),\r\n                    container: _this2.instance.$element().find(\".\".concat(_constants.FIXED_CONTAINER_CLASS)),\r\n                    cursorOffset: function() {\r\n                        var $dragElement = (0, _renderer2.default)(dragElement);\r\n                        return {\r\n                            x: $dragElement.width() / 2,\r\n                            y: $dragElement.height() / 2\r\n                        }\r\n                    },\r\n                    dragTemplate: function() {\r\n                        return dragElement\r\n                    },\r\n                    onDragStart: function(e) {\r\n                        var event = e.event;\r\n                        var itemData = (0, _renderer2.default)(e.itemElement).data(_constants.LIST_ITEM_DATA_KEY);\r\n                        if (itemData && !itemData.data.disabled) {\r\n                            event.data = event.data || {};\r\n                            event.data.itemElement = dragElement = _this2._createDragAppointment(itemData.data, itemData.settings);\r\n                            dragBehavior.onDragStart(event.data);\r\n                            _translator2.default.resetPosition((0, _renderer2.default)(dragElement))\r\n                        }\r\n                    },\r\n                    onDragEnd: function(e) {\r\n                        var itemData = (0, _renderer2.default)(e.itemElement).data(_constants.LIST_ITEM_DATA_KEY);\r\n                        if (itemData && !itemData.data.disabled) {\r\n                            dragBehavior.onDragEnd(e)\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createDragAppointment\",\r\n        value: function(itemData, settings) {\r\n            var appointments = this.instance.getAppointmentsInstance();\r\n            var appointmentIndex = appointments.option(\"items\").length;\r\n            settings.isCompact = false;\r\n            settings.virtual = false;\r\n            appointments._renderItem(appointmentIndex, {\r\n                itemData: itemData,\r\n                settings: [settings]\r\n            });\r\n            return appointments._findItemElementByItem(itemData)[0]\r\n        }\r\n    }, {\r\n        key: \"_getCollectorOffset\",\r\n        value: function(width, cellWidth) {\r\n            return cellWidth - width - this._getCollectorRightOffset()\r\n        }\r\n    }, {\r\n        key: \"_getCollectorRightOffset\",\r\n        value: function() {\r\n            return this.instance.getRenderingStrategyInstance()._isCompactTheme() ? COMPACT_THEME_WEEK_VIEW_COLLECTOR_OFFSET : WEEK_VIEW_COLLECTOR_OFFSET\r\n        }\r\n    }, {\r\n        key: \"_makeBackgroundDarker\",\r\n        value: function(button) {\r\n            button.css(\"boxShadow\", \"inset \".concat(button.get(0).getBoundingClientRect().width, \"px 0 0 0 rgba(0, 0, 0, 0.3)\"))\r\n        }\r\n    }, {\r\n        key: \"_makeBackgroundColor\",\r\n        value: function($button, colors, color) {\r\n            _deferred2.default.when.apply(null, colors).done(function() {\r\n                this._makeBackgroundColorCore($button, color, arguments)\r\n            }.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_makeBackgroundColorCore\",\r\n        value: function($button, color, itemsColors) {\r\n            var paintButton = true;\r\n            var currentItemColor;\r\n            color && color.done(function(color) {\r\n                if (itemsColors.length) {\r\n                    currentItemColor = itemsColors[0];\r\n                    for (var i = 1; i < itemsColors.length; i++) {\r\n                        if (currentItemColor !== itemsColors[i]) {\r\n                            paintButton = false;\r\n                            break\r\n                        }\r\n                        currentItemColor = color\r\n                    }\r\n                }\r\n                color && paintButton && $button.css(\"backgroundColor\", color)\r\n            }.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_setPosition\",\r\n        value: function(element, position) {\r\n            _translator2.default.move(element, {\r\n                top: position.top,\r\n                left: position.left\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createCompactButton\",\r\n        value: function(template, options) {\r\n            var _this3 = this;\r\n            var $button = this._createCompactButtonElement(options);\r\n            return this.instance._createComponent($button, _button2.default, {\r\n                type: \"default\",\r\n                width: options.width,\r\n                height: options.height,\r\n                onClick: function(e) {\r\n                    return _this3._onButtonClick(e, options)\r\n                },\r\n                template: this._renderTemplate(template, options.items, options.isCompact)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createCompactButtonElement\",\r\n        value: function(_ref) {\r\n            var isCompact = _ref.isCompact,\r\n                $container = _ref.$container,\r\n                width = _ref.width,\r\n                coordinates = _ref.coordinates,\r\n                applyOffset = _ref.applyOffset,\r\n                cellWidth = _ref.cellWidth;\r\n            var result = (0, _renderer2.default)(\"<div>\").addClass(APPOINTMENT_COLLECTOR_CLASS).toggleClass(COMPACT_APPOINTMENT_COLLECTOR_CLASS, isCompact).appendTo($container);\r\n            var offset = applyOffset ? this._getCollectorOffset(width, cellWidth) : 0;\r\n            this._setPosition(result, {\r\n                top: coordinates.top,\r\n                left: coordinates.left + offset\r\n            });\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_renderTemplate\",\r\n        value: function(template, items, isCompact) {\r\n            return new _function_template.FunctionTemplate(function(options) {\r\n                return template.render({\r\n                    model: {\r\n                        appointmentCount: items.data.length,\r\n                        isCompact: isCompact\r\n                    },\r\n                    container: options.container\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createTemplate\",\r\n        value: function(count, isCompact) {\r\n            this._initButtonTemplate(count, isCompact);\r\n            return this.instance._getAppointmentTemplate(\"appointmentCollectorTemplate\")\r\n        }\r\n    }, {\r\n        key: \"_initButtonTemplate\",\r\n        value: function(count, isCompact) {\r\n            var _this4 = this;\r\n            this.instance._defaultTemplates.appointmentCollector = new _function_template.FunctionTemplate(function(options) {\r\n                return _this4._createButtonTemplate(count, (0, _renderer2.default)(options.container), isCompact)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createButtonTemplate\",\r\n        value: function(appointmentCount, element, isCompact) {\r\n            var text = isCompact ? appointmentCount : _message2.default.getFormatter(\"dxScheduler-moreAppointments\")(appointmentCount);\r\n            return element.append((0, _renderer2.default)(\"<span>\").text(text)).addClass(APPOINTMENT_COLLECTOR_CONTENT_CLASS)\r\n        }\r\n    }]);\r\n    return CompactAppointmentsHelper\r\n}();\r\n"]},"metadata":{},"sourceType":"script"}