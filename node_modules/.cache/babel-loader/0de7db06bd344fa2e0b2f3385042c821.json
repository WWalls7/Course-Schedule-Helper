{"ast":null,"code":"/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_editor.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar AsyncTemplateMixin = require(\"../shared/async_template_mixin\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar Guid = require(\"../../core/guid\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar commonUtils = require(\"../../core/utils/common\");\n\nvar domUtils = require(\"../../core/utils/dom\");\n\nvar focused = require(\"../widget/selectors\").focused;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar getPublicElement = require(\"../../core/utils/dom\").getPublicElement;\n\nvar errors = require(\"../widget/ui.errors\");\n\nvar positionUtils = require(\"../../animation/position\");\n\nvar getDefaultAlignment = require(\"../../core/utils/position\").getDefaultAlignment;\n\nvar DropDownButton = require(\"./ui.drop_down_button\").default;\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar TextBox = require(\"../text_box\");\n\nvar clickEvent = require(\"../../events/click\");\n\nvar devices = require(\"../../core/devices\");\n\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\n\nvar Popup = require(\"../popup\");\n\nvar DROP_DOWN_EDITOR_CLASS = \"dx-dropdowneditor\";\nvar DROP_DOWN_EDITOR_INPUT_WRAPPER = \"dx-dropdowneditor-input-wrapper\";\nvar DROP_DOWN_EDITOR_BUTTON_ICON = \"dx-dropdowneditor-icon\";\nvar DROP_DOWN_EDITOR_OVERLAY = \"dx-dropdowneditor-overlay\";\nvar DROP_DOWN_EDITOR_OVERLAY_FLIPPED = \"dx-dropdowneditor-overlay-flipped\";\nvar DROP_DOWN_EDITOR_ACTIVE = \"dx-dropdowneditor-active\";\nvar DROP_DOWN_EDITOR_FIELD_CLICKABLE = \"dx-dropdowneditor-field-clickable\";\nvar DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER = \"dx-dropdowneditor-field-template-wrapper\";\nvar isIOs = \"ios\" === devices.current().platform;\nvar DropDownEditor = TextBox.inherit({\n  _supportedKeys: function () {\n    var homeEndHandler = function (e) {\n      if (this.option(\"opened\")) {\n        e.preventDefault();\n        return true;\n      }\n\n      return false;\n    };\n\n    return extend({}, this.callBase(), {\n      tab: function (e) {\n        if (!this.option(\"opened\")) {\n          return;\n        }\n\n        if (\"instantly\" === this.option(\"applyValueMode\")) {\n          this.close();\n          return;\n        }\n\n        var $focusableElement = e.shiftKey ? this._getLastPopupElement() : this._getFirstPopupElement();\n        $focusableElement && eventsEngine.trigger($focusableElement, \"focus\");\n        e.preventDefault();\n      },\n      escape: function (e) {\n        if (this.option(\"opened\")) {\n          e.preventDefault();\n        }\n\n        this.close();\n        return true;\n      },\n      upArrow: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (e.altKey) {\n          this.close();\n          return false;\n        }\n\n        return true;\n      },\n      downArrow: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (e.altKey) {\n          this._validatedOpening();\n\n          return false;\n        }\n\n        return true;\n      },\n      enter: function (e) {\n        if (this.option(\"opened\")) {\n          e.preventDefault();\n\n          this._valueChangeEventHandler(e);\n        }\n\n        return true;\n      },\n      home: homeEndHandler,\n      end: homeEndHandler\n    });\n  },\n  _getDefaultButtons: function () {\n    return this.callBase().concat([{\n      name: \"dropDown\",\n      Ctor: DropDownButton\n    }]);\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      value: null,\n      onOpened: null,\n      onClosed: null,\n      opened: false,\n      acceptCustomValue: true,\n      applyValueMode: \"instantly\",\n      deferRendering: true,\n      activeStateEnabled: true,\n      dropDownButtonTemplate: \"dropDownButton\",\n      fieldTemplate: null,\n      contentTemplate: null,\n      openOnFieldClick: false,\n      showDropDownButton: true,\n      buttons: void 0,\n      dropDownOptions: {},\n      popupPosition: this._getDefaultPopupPosition(),\n      onPopupInitialized: null,\n      applyButtonText: messageLocalization.format(\"OK\"),\n      cancelButtonText: messageLocalization.format(\"Cancel\"),\n      buttonsLocation: \"default\",\n      showPopupTitle: false,\n      useHiddenSubmitElement: false\n    });\n  },\n  _getDefaultPopupPosition: function () {\n    var position = getDefaultAlignment();\n    return {\n      offset: {\n        h: 0,\n        v: -1\n      },\n      my: position + \" top\",\n      at: position + \" bottom\",\n      collision: \"flip flip\"\n    };\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function (_device) {\n        var isGeneric = \"generic\" === _device.platform;\n        return isGeneric;\n      },\n      options: {\n        popupPosition: {\n          offset: {\n            v: 0\n          }\n        }\n      }\n    }]);\n  },\n  _inputWrapper: function () {\n    return this.$element().find(\".\" + DROP_DOWN_EDITOR_INPUT_WRAPPER);\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initVisibilityActions();\n\n    this._initPopupInitializedAction();\n\n    this._initInnerOptionCache(\"dropDownOptions\");\n  },\n  _initVisibilityActions: function () {\n    this._openAction = this._createActionByOption(\"onOpened\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n    this._closeAction = this._createActionByOption(\"onClosed\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initPopupInitializedAction: function () {\n    this._popupInitializedAction = this._createActionByOption(\"onPopupInitialized\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initMarkup: function () {\n    this._renderSubmitElement();\n\n    this.callBase();\n    this.$element().addClass(DROP_DOWN_EDITOR_CLASS);\n    this.setAria(\"role\", \"combobox\");\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderOpenHandler();\n\n    this._attachFocusOutHandler();\n\n    this._renderOpenedState();\n  },\n  _renderContentImpl: function () {\n    if (!this.option(\"deferRendering\")) {\n      this._createPopup();\n    }\n  },\n  _renderInput: function () {\n    this.callBase();\n    this.$element().wrapInner($(\"<div>\").addClass(DROP_DOWN_EDITOR_INPUT_WRAPPER));\n    this._$container = this.$element().children().eq(0);\n\n    this._setDefaultAria();\n  },\n  _setDefaultAria: function () {\n    this.setAria({\n      haspopup: \"true\",\n      autocomplete: \"list\"\n    });\n  },\n  _readOnlyPropValue: function () {\n    return !this.option(\"acceptCustomValue\") || this.callBase();\n  },\n  _cleanFocusState: function () {\n    this.callBase();\n\n    if (this.option(\"fieldTemplate\")) {\n      this._detachFocusEvents();\n    }\n  },\n  _getFieldTemplate: function () {\n    return this.option(\"fieldTemplate\") && this._getTemplateByOption(\"fieldTemplate\");\n  },\n  _renderMask: function () {\n    if (this.option(\"fieldTemplate\")) {\n      return;\n    }\n\n    this.callBase();\n  },\n  _renderField: function () {\n    var fieldTemplate = this._getFieldTemplate();\n\n    fieldTemplate && this._renderTemplatedField(fieldTemplate, this._fieldRenderData());\n  },\n  _renderPlaceholder: function () {\n    var hasFieldTemplate = !!this._getFieldTemplate();\n\n    if (!hasFieldTemplate) {\n      this.callBase();\n    }\n  },\n  _renderValue: function () {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      this._setSubmitValue();\n    }\n\n    var promise = this.callBase();\n    promise.always(this._renderField.bind(this));\n  },\n  _renderTemplatedField: function (fieldTemplate, data) {\n    var _this = this;\n\n    var isFocused = focused(this._input());\n    var $container = this._$container;\n\n    this._disposeKeyboardProcessor();\n\n    var beforeButtonsContainerParent = this._$beforeButtonsContainer && this._$beforeButtonsContainer[0].parentNode;\n    var afterButtonsContainerParent = this._$afterButtonsContainer && this._$afterButtonsContainer[0].parentNode;\n    beforeButtonsContainerParent && beforeButtonsContainerParent.removeChild(this._$beforeButtonsContainer[0]);\n    afterButtonsContainerParent && afterButtonsContainerParent.removeChild(this._$afterButtonsContainer[0]);\n\n    this._detachFocusEvents();\n\n    $container.empty();\n    var $templateWrapper = $(\"<div>\").addClass(DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER).appendTo($container);\n    fieldTemplate.render({\n      model: data,\n      container: domUtils.getPublicElement($templateWrapper),\n      onRendered: function () {\n        var $input = _this._input();\n\n        if (!$input.length) {\n          throw errors.Error(\"E1010\");\n        }\n\n        _this._refreshEvents();\n\n        _this._refreshValueChangeEvent();\n\n        _this._renderFocusState();\n\n        isFocused && eventsEngine.trigger($input, \"focus\");\n      }\n    });\n    $container.prepend(this._$beforeButtonsContainer);\n    $container.append(this._$afterButtonsContainer);\n  },\n  _fieldRenderData: function () {\n    return this.option(\"value\");\n  },\n  _initTemplates: function () {\n    this.callBase();\n    this._defaultTemplates.dropDownButton = new FunctionTemplate(function (options) {\n      var $icon = $(\"<div>\").addClass(DROP_DOWN_EDITOR_BUTTON_ICON);\n      $(options.container).append($icon);\n    });\n  },\n  _renderOpenHandler: function () {\n    var that = this;\n\n    var $inputWrapper = that._inputWrapper();\n\n    var eventName = eventUtils.addNamespace(clickEvent.name, that.NAME);\n    var openOnFieldClick = that.option(\"openOnFieldClick\");\n    eventsEngine.off($inputWrapper, eventName);\n    eventsEngine.on($inputWrapper, eventName, that._getInputClickHandler(openOnFieldClick));\n    that.$element().toggleClass(DROP_DOWN_EDITOR_FIELD_CLICKABLE, openOnFieldClick);\n\n    if (openOnFieldClick) {\n      that._openOnFieldClickAction = that._createAction(that._openHandler.bind(that));\n    }\n  },\n  _attachFocusOutHandler: function () {\n    if (isIOs) {\n      this._detachFocusOutEvents();\n\n      eventsEngine.on(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME), function (event) {\n        var newTarget = event.relatedTarget;\n        var popupWrapper = this.content ? $(this.content()).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY) : this._$popup;\n\n        if (newTarget && this.option(\"opened\")) {\n          var isNewTargetOutside = 0 === $(newTarget).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY, popupWrapper).length;\n\n          if (isNewTargetOutside) {\n            this.close();\n          }\n        }\n      }.bind(this));\n    }\n  },\n  _detachFocusOutEvents: function () {\n    isIOs && eventsEngine.off(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME));\n  },\n  _getInputClickHandler: function (openOnFieldClick) {\n    var that = this;\n    return openOnFieldClick ? function (e) {\n      that._executeOpenAction(e);\n    } : function (e) {\n      that._focusInput();\n    };\n  },\n  _openHandler: function () {\n    this._toggleOpenState();\n  },\n  _executeOpenAction: function (e) {\n    this._openOnFieldClickAction({\n      event: e\n    });\n  },\n  _keyboardEventBindingTarget: function () {\n    return this._input();\n  },\n  _focusInput: function () {\n    if (this.option(\"disabled\")) {\n      return false;\n    }\n\n    if (this.option(\"focusStateEnabled\") && !focused(this._input())) {\n      eventsEngine.trigger(this._input(), \"focus\");\n    }\n\n    return true;\n  },\n  _toggleOpenState: function (isVisible) {\n    if (!this._focusInput()) {\n      return;\n    }\n\n    if (!this.option(\"readOnly\")) {\n      isVisible = arguments.length ? isVisible : !this.option(\"opened\");\n      this.option(\"opened\", isVisible);\n    }\n  },\n  _renderOpenedState: function () {\n    var opened = this.option(\"opened\");\n\n    if (opened) {\n      this._createPopup();\n    }\n\n    this.$element().toggleClass(DROP_DOWN_EDITOR_ACTIVE, opened);\n\n    this._setPopupOption(\"visible\", opened);\n\n    this.setAria({\n      expanded: opened\n    });\n    this.setAria(\"owns\", (opened || void 0) && this._popupContentId, this.$element());\n  },\n  _createPopup: function () {\n    if (this._$popup) {\n      return;\n    }\n\n    this._$popup = $(\"<div>\").addClass(DROP_DOWN_EDITOR_OVERLAY).addClass(this.option(\"customOverlayCssClass\")).appendTo(this.$element());\n\n    this._renderPopup();\n\n    this._renderPopupContent();\n  },\n  _renderPopup: function () {\n    this._popup = this._createComponent(this._$popup, Popup, extend(this._popupConfig(), this._getInnerOptionsCache(\"dropDownOptions\")));\n\n    this._popup.on({\n      showing: this._popupShowingHandler.bind(this),\n      shown: this._popupShownHandler.bind(this),\n      hiding: this._popupHidingHandler.bind(this),\n      hidden: this._popupHiddenHandler.bind(this)\n    });\n\n    this._popup.option(\"onContentReady\", this._contentReadyHandler.bind(this));\n\n    this._contentReadyHandler();\n\n    this._setPopupContentId(this._popup.$content());\n\n    this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\");\n  },\n  _setPopupContentId: function ($popupContent) {\n    this._popupContentId = \"dx-\" + new Guid();\n    this.setAria(\"id\", this._popupContentId, $popupContent);\n  },\n  _contentReadyHandler: commonUtils.noop,\n  _popupConfig: function () {\n    return {\n      onInitialized: this._popupInitializedHandler(),\n      position: extend(this.option(\"popupPosition\"), {\n        of: this.$element()\n      }),\n      showTitle: this.option(\"showPopupTitle\"),\n      width: \"auto\",\n      height: \"auto\",\n      shading: false,\n      closeOnTargetScroll: true,\n      closeOnOutsideClick: this._closeOutsideDropDownHandler.bind(this),\n      animation: {\n        show: {\n          type: \"fade\",\n          duration: 0,\n          from: 0,\n          to: 1\n        },\n        hide: {\n          type: \"fade\",\n          duration: 400,\n          from: 1,\n          to: 0\n        }\n      },\n      deferRendering: false,\n      focusStateEnabled: false,\n      showCloseButton: false,\n      toolbarItems: this._getPopupToolbarItems(),\n      onPositioned: this._popupPositionedHandler.bind(this),\n      fullScreen: false\n    };\n  },\n  _popupInitializedHandler: function () {\n    if (!this.option(\"onPopupInitialized\")) {\n      return;\n    }\n\n    return function (e) {\n      this._popupInitializedAction({\n        popup: e.component\n      });\n    }.bind(this);\n  },\n  _popupPositionedHandler: function (e) {\n    e.position && this._popup.overlayContent().toggleClass(DROP_DOWN_EDITOR_OVERLAY_FLIPPED, e.position.v.flip);\n  },\n  _popupShowingHandler: commonUtils.noop,\n  _popupHidingHandler: function () {\n    this.option(\"opened\", false);\n  },\n  _popupShownHandler: function () {\n    this._openAction();\n\n    if (this._$validationMessage) {\n      this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition());\n    }\n  },\n  _popupHiddenHandler: function () {\n    this._closeAction();\n\n    if (this._$validationMessage) {\n      this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition());\n    }\n  },\n  _getValidationMessagePosition: function () {\n    var positionRequest = \"below\";\n\n    if (this._popup && this._popup.option(\"visible\")) {\n      var myTop = positionUtils.setup(this.$element()).top;\n      var popupTop = positionUtils.setup(this._popup.$content()).top;\n      positionRequest = myTop + this.option(\"popupPosition\").offset.v > popupTop ? \"below\" : \"above\";\n    }\n\n    return this.callBase(positionRequest);\n  },\n  _renderPopupContent: function () {\n    var contentTemplate = this._getTemplateByOption(\"contentTemplate\");\n\n    if (!(contentTemplate && this.option(\"contentTemplate\"))) {\n      return;\n    }\n\n    var $popupContent = this._popup.$content();\n\n    var templateData = {\n      value: this._fieldRenderData(),\n      component: this\n    };\n    $popupContent.empty();\n    contentTemplate.render({\n      container: domUtils.getPublicElement($popupContent),\n      model: templateData\n    });\n  },\n  _closeOutsideDropDownHandler: function (_ref) {\n    var target = _ref.target;\n    var $target = $(target);\n    var dropDownButton = this.getButton(\"dropDown\");\n    var $dropDownButton = dropDownButton && dropDownButton.$element();\n    var isInputClicked = !!$target.closest(this.$element()).length;\n    var isDropDownButtonClicked = !!$target.closest($dropDownButton).length;\n    var isOutsideClick = !isInputClicked && !isDropDownButtonClicked;\n    return isOutsideClick;\n  },\n  _clean: function () {\n    delete this._openOnFieldClickAction;\n\n    if (this._$popup) {\n      this._$popup.remove();\n\n      delete this._$popup;\n      delete this._popup;\n    }\n\n    this.callBase();\n  },\n  _setPopupOption: function (optionName, value) {\n    this._setWidgetOption(\"_popup\", arguments);\n  },\n  _validatedOpening: function () {\n    if (!this.option(\"readOnly\")) {\n      this._toggleOpenState(true);\n    }\n  },\n  _getPopupToolbarItems: function () {\n    return \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\n  },\n  _getFirstPopupElement: function () {\n    return this._popup._wrapper().find(\".dx-popup-done.dx-button\");\n  },\n  _getLastPopupElement: function () {\n    return this._popup._wrapper().find(\".dx-popup-cancel.dx-button\");\n  },\n  _popupElementTabHandler: function (e) {\n    var $element = $(e.currentTarget);\n\n    if (e.shiftKey && $element.is(this._getFirstPopupElement()) || !e.shiftKey && $element.is(this._getLastPopupElement())) {\n      eventsEngine.trigger(this._input(), \"focus\");\n      e.preventDefault();\n    }\n  },\n  _popupElementEscHandler: function () {\n    eventsEngine.trigger(this._input(), \"focus\");\n    this.close();\n  },\n  _popupButtonInitializedHandler: function (e) {\n    e.component.registerKeyHandler(\"tab\", this._popupElementTabHandler.bind(this));\n    e.component.registerKeyHandler(\"escape\", this._popupElementEscHandler.bind(this));\n  },\n  _popupToolbarItemsConfig: function () {\n    var buttonsConfig = [{\n      shortcut: \"done\",\n      options: {\n        onClick: this._applyButtonHandler.bind(this),\n        text: this.option(\"applyButtonText\"),\n        onInitialized: this._popupButtonInitializedHandler.bind(this)\n      }\n    }, {\n      shortcut: \"cancel\",\n      options: {\n        onClick: this._cancelButtonHandler.bind(this),\n        text: this.option(\"cancelButtonText\"),\n        onInitialized: this._popupButtonInitializedHandler.bind(this)\n      }\n    }];\n    return this._applyButtonsLocation(buttonsConfig);\n  },\n  _applyButtonsLocation: function (buttonsConfig) {\n    var buttonsLocation = this.option(\"buttonsLocation\");\n    var resultConfig = buttonsConfig;\n\n    if (\"default\" !== buttonsLocation) {\n      var position = commonUtils.splitPair(buttonsLocation);\n      each(resultConfig, function (_, element) {\n        extend(element, {\n          toolbar: position[0],\n          location: position[1]\n        });\n      });\n    }\n\n    return resultConfig;\n  },\n  _applyButtonHandler: function () {\n    this.close();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _cancelButtonHandler: function () {\n    this.close();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _updatePopupWidth: commonUtils.noop,\n  _popupOptionChanged: function (args) {\n    var options = this._getOptionsFromContainer(args);\n\n    this._setPopupOption(options);\n\n    if (Object.keys(options).indexOf(\"width\") !== -1 && void 0 === options.width) {\n      this._updatePopupWidth();\n    }\n  },\n  _renderSubmitElement: function () {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n    }\n  },\n  _setSubmitValue: function () {\n    this._getSubmitElement().val(this.option(\"value\"));\n  },\n  _getSubmitElement: function () {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      return this._$submitElement;\n    } else {\n      return this.callBase();\n    }\n  },\n  _dispose: function () {\n    this._detachFocusOutEvents();\n\n    this.callBase();\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"opened\":\n        this._renderOpenedState();\n\n        break;\n\n      case \"onOpened\":\n      case \"onClosed\":\n        this._initVisibilityActions();\n\n        break;\n\n      case \"onPopupInitialized\":\n        this._initPopupInitializedAction();\n\n        break;\n\n      case \"fieldTemplate\":\n        if (isDefined(args.value)) {\n          this._renderField();\n        } else {\n          this._invalidate();\n        }\n\n        break;\n\n      case \"contentTemplate\":\n      case \"acceptCustomValue\":\n      case \"openOnFieldClick\":\n        this._invalidate();\n\n        break;\n\n      case \"dropDownButtonTemplate\":\n      case \"showDropDownButton\":\n        this._updateButtons([\"dropDown\"]);\n\n        break;\n\n      case \"dropDownOptions\":\n        this._popupOptionChanged(args);\n\n        this._cacheInnerOptions(\"dropDownOptions\", args.value);\n\n        break;\n\n      case \"popupPosition\":\n      case \"deferRendering\":\n        break;\n\n      case \"applyValueMode\":\n      case \"applyButtonText\":\n      case \"cancelButtonText\":\n      case \"buttonsLocation\":\n        this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\n\n        break;\n\n      case \"showPopupTitle\":\n        this._setPopupOption(\"showTitle\", args.value);\n\n        break;\n\n      case \"useHiddenSubmitElement\":\n        if (this._$submitElement) {\n          this._$submitElement.remove();\n\n          this._$submitElement = void 0;\n        }\n\n        this._renderSubmitElement();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  open: function () {\n    this.option(\"opened\", true);\n  },\n  close: function () {\n    this.option(\"opened\", false);\n  },\n  field: function () {\n    return getPublicElement(this._input());\n  },\n  content: function () {\n    return this._popup ? this._popup.content() : null;\n  }\n}).include(AsyncTemplateMixin);\nregisterComponent(\"dxDropDownEditor\", DropDownEditor);\nmodule.exports = DropDownEditor;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/Swizzle/Desktop/SE Project/Application/csh/node_modules/devextreme/ui/drop_down_editor/ui.drop_down_editor.js"],"names":["$","require","AsyncTemplateMixin","eventsEngine","Guid","registerComponent","commonUtils","domUtils","focused","each","isDefined","extend","getPublicElement","errors","positionUtils","getDefaultAlignment","DropDownButton","default","messageLocalization","eventUtils","TextBox","clickEvent","devices","FunctionTemplate","Popup","DROP_DOWN_EDITOR_CLASS","DROP_DOWN_EDITOR_INPUT_WRAPPER","DROP_DOWN_EDITOR_BUTTON_ICON","DROP_DOWN_EDITOR_OVERLAY","DROP_DOWN_EDITOR_OVERLAY_FLIPPED","DROP_DOWN_EDITOR_ACTIVE","DROP_DOWN_EDITOR_FIELD_CLICKABLE","DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER","isIOs","current","platform","DropDownEditor","inherit","_supportedKeys","homeEndHandler","e","option","preventDefault","callBase","tab","close","$focusableElement","shiftKey","_getLastPopupElement","_getFirstPopupElement","trigger","escape","upArrow","stopPropagation","altKey","downArrow","_validatedOpening","enter","_valueChangeEventHandler","home","end","_getDefaultButtons","concat","name","Ctor","_getDefaultOptions","value","onOpened","onClosed","opened","acceptCustomValue","applyValueMode","deferRendering","activeStateEnabled","dropDownButtonTemplate","fieldTemplate","contentTemplate","openOnFieldClick","showDropDownButton","buttons","dropDownOptions","popupPosition","_getDefaultPopupPosition","onPopupInitialized","applyButtonText","format","cancelButtonText","buttonsLocation","showPopupTitle","useHiddenSubmitElement","position","offset","h","v","my","at","collision","_defaultOptionsRules","device","_device","isGeneric","options","_inputWrapper","$element","find","_init","_initVisibilityActions","_initPopupInitializedAction","_initInnerOptionCache","_openAction","_createActionByOption","excludeValidators","_closeAction","_popupInitializedAction","_initMarkup","_renderSubmitElement","addClass","setAria","_render","_renderOpenHandler","_attachFocusOutHandler","_renderOpenedState","_renderContentImpl","_createPopup","_renderInput","wrapInner","_$container","children","eq","_setDefaultAria","haspopup","autocomplete","_readOnlyPropValue","_cleanFocusState","_detachFocusEvents","_getFieldTemplate","_getTemplateByOption","_renderMask","_renderField","_renderTemplatedField","_fieldRenderData","_renderPlaceholder","hasFieldTemplate","_renderValue","_setSubmitValue","promise","always","bind","data","_this","isFocused","_input","$container","_disposeKeyboardProcessor","beforeButtonsContainerParent","_$beforeButtonsContainer","parentNode","afterButtonsContainerParent","_$afterButtonsContainer","removeChild","empty","$templateWrapper","appendTo","render","model","container","onRendered","$input","length","Error","_refreshEvents","_refreshValueChangeEvent","_renderFocusState","prepend","append","_initTemplates","_defaultTemplates","dropDownButton","$icon","that","$inputWrapper","eventName","addNamespace","NAME","off","on","_getInputClickHandler","toggleClass","_openOnFieldClickAction","_createAction","_openHandler","_detachFocusOutEvents","event","newTarget","relatedTarget","popupWrapper","content","closest","_$popup","isNewTargetOutside","_executeOpenAction","_focusInput","_toggleOpenState","_keyboardEventBindingTarget","isVisible","arguments","_setPopupOption","expanded","_popupContentId","_renderPopup","_renderPopupContent","_popup","_createComponent","_popupConfig","_getInnerOptionsCache","showing","_popupShowingHandler","shown","_popupShownHandler","hiding","_popupHidingHandler","hidden","_popupHiddenHandler","_contentReadyHandler","_setPopupContentId","$content","_bindInnerWidgetOptions","$popupContent","noop","onInitialized","_popupInitializedHandler","of","showTitle","width","height","shading","closeOnTargetScroll","closeOnOutsideClick","_closeOutsideDropDownHandler","animation","show","type","duration","from","to","hide","focusStateEnabled","showCloseButton","toolbarItems","_getPopupToolbarItems","onPositioned","_popupPositionedHandler","fullScreen","popup","component","overlayContent","flip","_$validationMessage","dxOverlay","_getValidationMessagePosition","positionRequest","myTop","setup","top","popupTop","templateData","_ref","target","$target","getButton","$dropDownButton","isInputClicked","isDropDownButtonClicked","isOutsideClick","_clean","remove","optionName","_setWidgetOption","_popupToolbarItemsConfig","_wrapper","_popupElementTabHandler","currentTarget","is","_popupElementEscHandler","_popupButtonInitializedHandler","registerKeyHandler","buttonsConfig","shortcut","onClick","_applyButtonHandler","text","_cancelButtonHandler","_applyButtonsLocation","resultConfig","splitPair","_","element","toolbar","location","focus","_updatePopupWidth","_popupOptionChanged","args","_getOptionsFromContainer","Object","keys","indexOf","_$submitElement","attr","_getSubmitElement","val","_dispose","_optionChanged","_invalidate","_updateButtons","_cacheInnerOptions","open","field","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_editor.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar AsyncTemplateMixin = require(\"../shared/async_template_mixin\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar Guid = require(\"../../core/guid\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar commonUtils = require(\"../../core/utils/common\");\r\nvar domUtils = require(\"../../core/utils/dom\");\r\nvar focused = require(\"../widget/selectors\").focused;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar getPublicElement = require(\"../../core/utils/dom\").getPublicElement;\r\nvar errors = require(\"../widget/ui.errors\");\r\nvar positionUtils = require(\"../../animation/position\");\r\nvar getDefaultAlignment = require(\"../../core/utils/position\").getDefaultAlignment;\r\nvar DropDownButton = require(\"./ui.drop_down_button\").default;\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar TextBox = require(\"../text_box\");\r\nvar clickEvent = require(\"../../events/click\");\r\nvar devices = require(\"../../core/devices\");\r\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\r\nvar Popup = require(\"../popup\");\r\nvar DROP_DOWN_EDITOR_CLASS = \"dx-dropdowneditor\";\r\nvar DROP_DOWN_EDITOR_INPUT_WRAPPER = \"dx-dropdowneditor-input-wrapper\";\r\nvar DROP_DOWN_EDITOR_BUTTON_ICON = \"dx-dropdowneditor-icon\";\r\nvar DROP_DOWN_EDITOR_OVERLAY = \"dx-dropdowneditor-overlay\";\r\nvar DROP_DOWN_EDITOR_OVERLAY_FLIPPED = \"dx-dropdowneditor-overlay-flipped\";\r\nvar DROP_DOWN_EDITOR_ACTIVE = \"dx-dropdowneditor-active\";\r\nvar DROP_DOWN_EDITOR_FIELD_CLICKABLE = \"dx-dropdowneditor-field-clickable\";\r\nvar DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER = \"dx-dropdowneditor-field-template-wrapper\";\r\nvar isIOs = \"ios\" === devices.current().platform;\r\nvar DropDownEditor = TextBox.inherit({\r\n    _supportedKeys: function() {\r\n        var homeEndHandler = function(e) {\r\n            if (this.option(\"opened\")) {\r\n                e.preventDefault();\r\n                return true\r\n            }\r\n            return false\r\n        };\r\n        return extend({}, this.callBase(), {\r\n            tab: function(e) {\r\n                if (!this.option(\"opened\")) {\r\n                    return\r\n                }\r\n                if (\"instantly\" === this.option(\"applyValueMode\")) {\r\n                    this.close();\r\n                    return\r\n                }\r\n                var $focusableElement = e.shiftKey ? this._getLastPopupElement() : this._getFirstPopupElement();\r\n                $focusableElement && eventsEngine.trigger($focusableElement, \"focus\");\r\n                e.preventDefault()\r\n            },\r\n            escape: function(e) {\r\n                if (this.option(\"opened\")) {\r\n                    e.preventDefault()\r\n                }\r\n                this.close();\r\n                return true\r\n            },\r\n            upArrow: function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                if (e.altKey) {\r\n                    this.close();\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            downArrow: function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                if (e.altKey) {\r\n                    this._validatedOpening();\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            enter: function(e) {\r\n                if (this.option(\"opened\")) {\r\n                    e.preventDefault();\r\n                    this._valueChangeEventHandler(e)\r\n                }\r\n                return true\r\n            },\r\n            home: homeEndHandler,\r\n            end: homeEndHandler\r\n        })\r\n    },\r\n    _getDefaultButtons: function() {\r\n        return this.callBase().concat([{\r\n            name: \"dropDown\",\r\n            Ctor: DropDownButton\r\n        }])\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            value: null,\r\n            onOpened: null,\r\n            onClosed: null,\r\n            opened: false,\r\n            acceptCustomValue: true,\r\n            applyValueMode: \"instantly\",\r\n            deferRendering: true,\r\n            activeStateEnabled: true,\r\n            dropDownButtonTemplate: \"dropDownButton\",\r\n            fieldTemplate: null,\r\n            contentTemplate: null,\r\n            openOnFieldClick: false,\r\n            showDropDownButton: true,\r\n            buttons: void 0,\r\n            dropDownOptions: {},\r\n            popupPosition: this._getDefaultPopupPosition(),\r\n            onPopupInitialized: null,\r\n            applyButtonText: messageLocalization.format(\"OK\"),\r\n            cancelButtonText: messageLocalization.format(\"Cancel\"),\r\n            buttonsLocation: \"default\",\r\n            showPopupTitle: false,\r\n            useHiddenSubmitElement: false\r\n        })\r\n    },\r\n    _getDefaultPopupPosition: function() {\r\n        var position = getDefaultAlignment();\r\n        return {\r\n            offset: {\r\n                h: 0,\r\n                v: -1\r\n            },\r\n            my: position + \" top\",\r\n            at: position + \" bottom\",\r\n            collision: \"flip flip\"\r\n        }\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function(_device) {\r\n                var isGeneric = \"generic\" === _device.platform;\r\n                return isGeneric\r\n            },\r\n            options: {\r\n                popupPosition: {\r\n                    offset: {\r\n                        v: 0\r\n                    }\r\n                }\r\n            }\r\n        }])\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element().find(\".\" + DROP_DOWN_EDITOR_INPUT_WRAPPER)\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initVisibilityActions();\r\n        this._initPopupInitializedAction();\r\n        this._initInnerOptionCache(\"dropDownOptions\")\r\n    },\r\n    _initVisibilityActions: function() {\r\n        this._openAction = this._createActionByOption(\"onOpened\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        });\r\n        this._closeAction = this._createActionByOption(\"onClosed\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initPopupInitializedAction: function() {\r\n        this._popupInitializedAction = this._createActionByOption(\"onPopupInitialized\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        this.$element().addClass(DROP_DOWN_EDITOR_CLASS);\r\n        this.setAria(\"role\", \"combobox\")\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderOpenHandler();\r\n        this._attachFocusOutHandler();\r\n        this._renderOpenedState()\r\n    },\r\n    _renderContentImpl: function() {\r\n        if (!this.option(\"deferRendering\")) {\r\n            this._createPopup()\r\n        }\r\n    },\r\n    _renderInput: function() {\r\n        this.callBase();\r\n        this.$element().wrapInner($(\"<div>\").addClass(DROP_DOWN_EDITOR_INPUT_WRAPPER));\r\n        this._$container = this.$element().children().eq(0);\r\n        this._setDefaultAria()\r\n    },\r\n    _setDefaultAria: function() {\r\n        this.setAria({\r\n            haspopup: \"true\",\r\n            autocomplete: \"list\"\r\n        })\r\n    },\r\n    _readOnlyPropValue: function() {\r\n        return !this.option(\"acceptCustomValue\") || this.callBase()\r\n    },\r\n    _cleanFocusState: function() {\r\n        this.callBase();\r\n        if (this.option(\"fieldTemplate\")) {\r\n            this._detachFocusEvents()\r\n        }\r\n    },\r\n    _getFieldTemplate: function() {\r\n        return this.option(\"fieldTemplate\") && this._getTemplateByOption(\"fieldTemplate\")\r\n    },\r\n    _renderMask: function() {\r\n        if (this.option(\"fieldTemplate\")) {\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _renderField: function() {\r\n        var fieldTemplate = this._getFieldTemplate();\r\n        fieldTemplate && this._renderTemplatedField(fieldTemplate, this._fieldRenderData())\r\n    },\r\n    _renderPlaceholder: function() {\r\n        var hasFieldTemplate = !!this._getFieldTemplate();\r\n        if (!hasFieldTemplate) {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _renderValue: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            this._setSubmitValue()\r\n        }\r\n        var promise = this.callBase();\r\n        promise.always(this._renderField.bind(this))\r\n    },\r\n    _renderTemplatedField: function(fieldTemplate, data) {\r\n        var _this = this;\r\n        var isFocused = focused(this._input());\r\n        var $container = this._$container;\r\n        this._disposeKeyboardProcessor();\r\n        var beforeButtonsContainerParent = this._$beforeButtonsContainer && this._$beforeButtonsContainer[0].parentNode;\r\n        var afterButtonsContainerParent = this._$afterButtonsContainer && this._$afterButtonsContainer[0].parentNode;\r\n        beforeButtonsContainerParent && beforeButtonsContainerParent.removeChild(this._$beforeButtonsContainer[0]);\r\n        afterButtonsContainerParent && afterButtonsContainerParent.removeChild(this._$afterButtonsContainer[0]);\r\n        this._detachFocusEvents();\r\n        $container.empty();\r\n        var $templateWrapper = $(\"<div>\").addClass(DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER).appendTo($container);\r\n        fieldTemplate.render({\r\n            model: data,\r\n            container: domUtils.getPublicElement($templateWrapper),\r\n            onRendered: function() {\r\n                var $input = _this._input();\r\n                if (!$input.length) {\r\n                    throw errors.Error(\"E1010\")\r\n                }\r\n                _this._refreshEvents();\r\n                _this._refreshValueChangeEvent();\r\n                _this._renderFocusState();\r\n                isFocused && eventsEngine.trigger($input, \"focus\")\r\n            }\r\n        });\r\n        $container.prepend(this._$beforeButtonsContainer);\r\n        $container.append(this._$afterButtonsContainer)\r\n    },\r\n    _fieldRenderData: function() {\r\n        return this.option(\"value\")\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.dropDownButton = new FunctionTemplate(function(options) {\r\n            var $icon = $(\"<div>\").addClass(DROP_DOWN_EDITOR_BUTTON_ICON);\r\n            $(options.container).append($icon)\r\n        })\r\n    },\r\n    _renderOpenHandler: function() {\r\n        var that = this;\r\n        var $inputWrapper = that._inputWrapper();\r\n        var eventName = eventUtils.addNamespace(clickEvent.name, that.NAME);\r\n        var openOnFieldClick = that.option(\"openOnFieldClick\");\r\n        eventsEngine.off($inputWrapper, eventName);\r\n        eventsEngine.on($inputWrapper, eventName, that._getInputClickHandler(openOnFieldClick));\r\n        that.$element().toggleClass(DROP_DOWN_EDITOR_FIELD_CLICKABLE, openOnFieldClick);\r\n        if (openOnFieldClick) {\r\n            that._openOnFieldClickAction = that._createAction(that._openHandler.bind(that))\r\n        }\r\n    },\r\n    _attachFocusOutHandler: function() {\r\n        if (isIOs) {\r\n            this._detachFocusOutEvents();\r\n            eventsEngine.on(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME), function(event) {\r\n                var newTarget = event.relatedTarget;\r\n                var popupWrapper = this.content ? $(this.content()).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY) : this._$popup;\r\n                if (newTarget && this.option(\"opened\")) {\r\n                    var isNewTargetOutside = 0 === $(newTarget).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY, popupWrapper).length;\r\n                    if (isNewTargetOutside) {\r\n                        this.close()\r\n                    }\r\n                }\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _detachFocusOutEvents: function() {\r\n        isIOs && eventsEngine.off(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME))\r\n    },\r\n    _getInputClickHandler: function(openOnFieldClick) {\r\n        var that = this;\r\n        return openOnFieldClick ? function(e) {\r\n            that._executeOpenAction(e)\r\n        } : function(e) {\r\n            that._focusInput()\r\n        }\r\n    },\r\n    _openHandler: function() {\r\n        this._toggleOpenState()\r\n    },\r\n    _executeOpenAction: function(e) {\r\n        this._openOnFieldClickAction({\r\n            event: e\r\n        })\r\n    },\r\n    _keyboardEventBindingTarget: function() {\r\n        return this._input()\r\n    },\r\n    _focusInput: function() {\r\n        if (this.option(\"disabled\")) {\r\n            return false\r\n        }\r\n        if (this.option(\"focusStateEnabled\") && !focused(this._input())) {\r\n            eventsEngine.trigger(this._input(), \"focus\")\r\n        }\r\n        return true\r\n    },\r\n    _toggleOpenState: function(isVisible) {\r\n        if (!this._focusInput()) {\r\n            return\r\n        }\r\n        if (!this.option(\"readOnly\")) {\r\n            isVisible = arguments.length ? isVisible : !this.option(\"opened\");\r\n            this.option(\"opened\", isVisible)\r\n        }\r\n    },\r\n    _renderOpenedState: function() {\r\n        var opened = this.option(\"opened\");\r\n        if (opened) {\r\n            this._createPopup()\r\n        }\r\n        this.$element().toggleClass(DROP_DOWN_EDITOR_ACTIVE, opened);\r\n        this._setPopupOption(\"visible\", opened);\r\n        this.setAria({\r\n            expanded: opened\r\n        });\r\n        this.setAria(\"owns\", (opened || void 0) && this._popupContentId, this.$element())\r\n    },\r\n    _createPopup: function() {\r\n        if (this._$popup) {\r\n            return\r\n        }\r\n        this._$popup = $(\"<div>\").addClass(DROP_DOWN_EDITOR_OVERLAY).addClass(this.option(\"customOverlayCssClass\")).appendTo(this.$element());\r\n        this._renderPopup();\r\n        this._renderPopupContent()\r\n    },\r\n    _renderPopup: function() {\r\n        this._popup = this._createComponent(this._$popup, Popup, extend(this._popupConfig(), this._getInnerOptionsCache(\"dropDownOptions\")));\r\n        this._popup.on({\r\n            showing: this._popupShowingHandler.bind(this),\r\n            shown: this._popupShownHandler.bind(this),\r\n            hiding: this._popupHidingHandler.bind(this),\r\n            hidden: this._popupHiddenHandler.bind(this)\r\n        });\r\n        this._popup.option(\"onContentReady\", this._contentReadyHandler.bind(this));\r\n        this._contentReadyHandler();\r\n        this._setPopupContentId(this._popup.$content());\r\n        this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\")\r\n    },\r\n    _setPopupContentId: function($popupContent) {\r\n        this._popupContentId = \"dx-\" + new Guid;\r\n        this.setAria(\"id\", this._popupContentId, $popupContent)\r\n    },\r\n    _contentReadyHandler: commonUtils.noop,\r\n    _popupConfig: function() {\r\n        return {\r\n            onInitialized: this._popupInitializedHandler(),\r\n            position: extend(this.option(\"popupPosition\"), {\r\n                of: this.$element()\r\n            }),\r\n            showTitle: this.option(\"showPopupTitle\"),\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            shading: false,\r\n            closeOnTargetScroll: true,\r\n            closeOnOutsideClick: this._closeOutsideDropDownHandler.bind(this),\r\n            animation: {\r\n                show: {\r\n                    type: \"fade\",\r\n                    duration: 0,\r\n                    from: 0,\r\n                    to: 1\r\n                },\r\n                hide: {\r\n                    type: \"fade\",\r\n                    duration: 400,\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            deferRendering: false,\r\n            focusStateEnabled: false,\r\n            showCloseButton: false,\r\n            toolbarItems: this._getPopupToolbarItems(),\r\n            onPositioned: this._popupPositionedHandler.bind(this),\r\n            fullScreen: false\r\n        }\r\n    },\r\n    _popupInitializedHandler: function() {\r\n        if (!this.option(\"onPopupInitialized\")) {\r\n            return\r\n        }\r\n        return function(e) {\r\n            this._popupInitializedAction({\r\n                popup: e.component\r\n            })\r\n        }.bind(this)\r\n    },\r\n    _popupPositionedHandler: function(e) {\r\n        e.position && this._popup.overlayContent().toggleClass(DROP_DOWN_EDITOR_OVERLAY_FLIPPED, e.position.v.flip)\r\n    },\r\n    _popupShowingHandler: commonUtils.noop,\r\n    _popupHidingHandler: function() {\r\n        this.option(\"opened\", false)\r\n    },\r\n    _popupShownHandler: function() {\r\n        this._openAction();\r\n        if (this._$validationMessage) {\r\n            this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition())\r\n        }\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this._closeAction();\r\n        if (this._$validationMessage) {\r\n            this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition())\r\n        }\r\n    },\r\n    _getValidationMessagePosition: function() {\r\n        var positionRequest = \"below\";\r\n        if (this._popup && this._popup.option(\"visible\")) {\r\n            var myTop = positionUtils.setup(this.$element()).top;\r\n            var popupTop = positionUtils.setup(this._popup.$content()).top;\r\n            positionRequest = myTop + this.option(\"popupPosition\").offset.v > popupTop ? \"below\" : \"above\"\r\n        }\r\n        return this.callBase(positionRequest)\r\n    },\r\n    _renderPopupContent: function() {\r\n        var contentTemplate = this._getTemplateByOption(\"contentTemplate\");\r\n        if (!(contentTemplate && this.option(\"contentTemplate\"))) {\r\n            return\r\n        }\r\n        var $popupContent = this._popup.$content();\r\n        var templateData = {\r\n            value: this._fieldRenderData(),\r\n            component: this\r\n        };\r\n        $popupContent.empty();\r\n        contentTemplate.render({\r\n            container: domUtils.getPublicElement($popupContent),\r\n            model: templateData\r\n        })\r\n    },\r\n    _closeOutsideDropDownHandler: function(_ref) {\r\n        var target = _ref.target;\r\n        var $target = $(target);\r\n        var dropDownButton = this.getButton(\"dropDown\");\r\n        var $dropDownButton = dropDownButton && dropDownButton.$element();\r\n        var isInputClicked = !!$target.closest(this.$element()).length;\r\n        var isDropDownButtonClicked = !!$target.closest($dropDownButton).length;\r\n        var isOutsideClick = !isInputClicked && !isDropDownButtonClicked;\r\n        return isOutsideClick\r\n    },\r\n    _clean: function() {\r\n        delete this._openOnFieldClickAction;\r\n        if (this._$popup) {\r\n            this._$popup.remove();\r\n            delete this._$popup;\r\n            delete this._popup\r\n        }\r\n        this.callBase()\r\n    },\r\n    _setPopupOption: function(optionName, value) {\r\n        this._setWidgetOption(\"_popup\", arguments)\r\n    },\r\n    _validatedOpening: function() {\r\n        if (!this.option(\"readOnly\")) {\r\n            this._toggleOpenState(true)\r\n        }\r\n    },\r\n    _getPopupToolbarItems: function() {\r\n        return \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : []\r\n    },\r\n    _getFirstPopupElement: function() {\r\n        return this._popup._wrapper().find(\".dx-popup-done.dx-button\")\r\n    },\r\n    _getLastPopupElement: function() {\r\n        return this._popup._wrapper().find(\".dx-popup-cancel.dx-button\")\r\n    },\r\n    _popupElementTabHandler: function(e) {\r\n        var $element = $(e.currentTarget);\r\n        if (e.shiftKey && $element.is(this._getFirstPopupElement()) || !e.shiftKey && $element.is(this._getLastPopupElement())) {\r\n            eventsEngine.trigger(this._input(), \"focus\");\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    _popupElementEscHandler: function() {\r\n        eventsEngine.trigger(this._input(), \"focus\");\r\n        this.close()\r\n    },\r\n    _popupButtonInitializedHandler: function(e) {\r\n        e.component.registerKeyHandler(\"tab\", this._popupElementTabHandler.bind(this));\r\n        e.component.registerKeyHandler(\"escape\", this._popupElementEscHandler.bind(this))\r\n    },\r\n    _popupToolbarItemsConfig: function() {\r\n        var buttonsConfig = [{\r\n            shortcut: \"done\",\r\n            options: {\r\n                onClick: this._applyButtonHandler.bind(this),\r\n                text: this.option(\"applyButtonText\"),\r\n                onInitialized: this._popupButtonInitializedHandler.bind(this)\r\n            }\r\n        }, {\r\n            shortcut: \"cancel\",\r\n            options: {\r\n                onClick: this._cancelButtonHandler.bind(this),\r\n                text: this.option(\"cancelButtonText\"),\r\n                onInitialized: this._popupButtonInitializedHandler.bind(this)\r\n            }\r\n        }];\r\n        return this._applyButtonsLocation(buttonsConfig)\r\n    },\r\n    _applyButtonsLocation: function(buttonsConfig) {\r\n        var buttonsLocation = this.option(\"buttonsLocation\");\r\n        var resultConfig = buttonsConfig;\r\n        if (\"default\" !== buttonsLocation) {\r\n            var position = commonUtils.splitPair(buttonsLocation);\r\n            each(resultConfig, function(_, element) {\r\n                extend(element, {\r\n                    toolbar: position[0],\r\n                    location: position[1]\r\n                })\r\n            })\r\n        }\r\n        return resultConfig\r\n    },\r\n    _applyButtonHandler: function() {\r\n        this.close();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _cancelButtonHandler: function() {\r\n        this.close();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _updatePopupWidth: commonUtils.noop,\r\n    _popupOptionChanged: function(args) {\r\n        var options = this._getOptionsFromContainer(args);\r\n        this._setPopupOption(options);\r\n        if (Object.keys(options).indexOf(\"width\") !== -1 && void 0 === options.width) {\r\n            this._updatePopupWidth()\r\n        }\r\n    },\r\n    _renderSubmitElement: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element())\r\n        }\r\n    },\r\n    _setSubmitValue: function() {\r\n        this._getSubmitElement().val(this.option(\"value\"))\r\n    },\r\n    _getSubmitElement: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            return this._$submitElement\r\n        } else {\r\n            return this.callBase()\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this._detachFocusOutEvents();\r\n        this.callBase()\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"opened\":\r\n                this._renderOpenedState();\r\n                break;\r\n            case \"onOpened\":\r\n            case \"onClosed\":\r\n                this._initVisibilityActions();\r\n                break;\r\n            case \"onPopupInitialized\":\r\n                this._initPopupInitializedAction();\r\n                break;\r\n            case \"fieldTemplate\":\r\n                if (isDefined(args.value)) {\r\n                    this._renderField()\r\n                } else {\r\n                    this._invalidate()\r\n                }\r\n                break;\r\n            case \"contentTemplate\":\r\n            case \"acceptCustomValue\":\r\n            case \"openOnFieldClick\":\r\n                this._invalidate();\r\n                break;\r\n            case \"dropDownButtonTemplate\":\r\n            case \"showDropDownButton\":\r\n                this._updateButtons([\"dropDown\"]);\r\n                break;\r\n            case \"dropDownOptions\":\r\n                this._popupOptionChanged(args);\r\n                this._cacheInnerOptions(\"dropDownOptions\", args.value);\r\n                break;\r\n            case \"popupPosition\":\r\n            case \"deferRendering\":\r\n                break;\r\n            case \"applyValueMode\":\r\n            case \"applyButtonText\":\r\n            case \"cancelButtonText\":\r\n            case \"buttonsLocation\":\r\n                this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\r\n                break;\r\n            case \"showPopupTitle\":\r\n                this._setPopupOption(\"showTitle\", args.value);\r\n                break;\r\n            case \"useHiddenSubmitElement\":\r\n                if (this._$submitElement) {\r\n                    this._$submitElement.remove();\r\n                    this._$submitElement = void 0\r\n                }\r\n                this._renderSubmitElement();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    open: function() {\r\n        this.option(\"opened\", true)\r\n    },\r\n    close: function() {\r\n        this.option(\"opened\", false)\r\n    },\r\n    field: function() {\r\n        return getPublicElement(this._input())\r\n    },\r\n    content: function() {\r\n        return this._popup ? this._popup.content() : null\r\n    }\r\n}).include(AsyncTemplateMixin);\r\nregisterComponent(\"dxDropDownEditor\", DropDownEditor);\r\nmodule.exports = DropDownEditor;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}