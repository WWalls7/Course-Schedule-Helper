{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _utils = require(\"./utils.recurrence\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _ui = require(\"../tooltip/ui.tooltip\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\n\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\n\nvar _utils3 = require(\"../../events/utils\");\n\nvar _utils4 = _interopRequireDefault(_utils3);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _dom_component = require(\"../../core/dom_component\");\n\nvar _dom_component2 = _interopRequireDefault(_dom_component);\n\nvar _resizable = require(\"../resizable\");\n\nvar _resizable2 = _interopRequireDefault(_resizable);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _date = require(\"../../localization/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\n\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.enter, \"dxSchedulerAppointment\");\n\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.leave, \"dxSchedulerAppointment\");\n\nvar EMPTY_APPOINTMENT_CLASS = \"dx-scheduler-appointment-empty\";\nvar APPOINTMENT_ALL_DAY_ITEM_CLASS = \"dx-scheduler-all-day-appointment\";\nvar DIRECTION_APPOINTMENT_CLASSES = {\n  horizontal: \"dx-scheduler-appointment-horizontal\",\n  vertical: \"dx-scheduler-appointment-vertical\"\n};\nvar RECURRENCE_APPOINTMENT_CLASS = \"dx-scheduler-appointment-recurrence\";\nvar COMPACT_APPOINTMENT_CLASS = \"dx-scheduler-appointment-compact\";\nvar REDUCED_APPOINTMENT_CLASS = \"dx-scheduler-appointment-reduced\";\nvar REDUCED_APPOINTMENT_ICON = \"dx-scheduler-appointment-reduced-icon\";\nvar REDUCED_APPOINTMENT_PARTS_CLASSES = {\n  head: \"dx-scheduler-appointment-head\",\n  body: \"dx-scheduler-appointment-body\",\n  tail: \"dx-scheduler-appointment-tail\"\n};\n\nvar Appointment = _dom_component2.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      data: {},\n      geometry: {\n        top: 0,\n        left: 0,\n        width: 0,\n        height: 0\n      },\n      allowDrag: true,\n      allowResize: true,\n      reduced: null,\n      isCompact: false,\n      direction: \"vertical\",\n      resizableConfig: {},\n      cellHeight: 0,\n      cellWidth: 0\n    });\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"data\":\n      case \"geometry\":\n      case \"allowDrag\":\n      case \"allowResize\":\n      case \"reduced\":\n      case \"sortedIndex\":\n      case \"isCompact\":\n      case \"direction\":\n      case \"resizableConfig\":\n      case \"cellHeight\":\n      case \"cellWidth\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getHorizontalResizingRule: function () {\n    var reducedHandles = {\n      head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\n      body: \"\",\n      tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\n    };\n    return {\n      handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\n      minHeight: 0,\n      minWidth: this.invoke(\"getCellWidth\"),\n      step: this.invoke(\"getResizableStep\")\n    };\n  },\n  _getVerticalResizingRule: function () {\n    var height = this.invoke(\"getCellHeight\");\n    return {\n      handles: DEFAULT_VERTICAL_HANDLES,\n      minWidth: 0,\n      minHeight: height,\n      step: height\n    };\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderAppointmentGeometry();\n\n    this._renderEmptyClass();\n\n    this._renderCompactClass();\n\n    this._renderReducedAppointment();\n\n    this._renderAllDayClass();\n\n    this._renderDirection();\n\n    this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\n    this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.option(\"data\")));\n    this.$element().attr(\"role\", \"button\");\n\n    this._renderRecurrenceClass();\n\n    this._renderResizable();\n  },\n  _renderAppointmentGeometry: function () {\n    var geometry = this.option(\"geometry\");\n    var $element = this.$element();\n\n    _translator2.default.move($element, {\n      top: geometry.top,\n      left: geometry.left\n    });\n\n    $element.css({\n      width: geometry.width < 0 ? 0 : geometry.width,\n      height: geometry.height < 0 ? 0 : geometry.height\n    });\n  },\n  _renderEmptyClass: function () {\n    var geometry = this.option(\"geometry\");\n\n    if (geometry.empty || this.option(\"isCompact\")) {\n      this.$element().addClass(EMPTY_APPOINTMENT_CLASS);\n    }\n  },\n  _renderReducedAppointment: function () {\n    var reducedPart = this.option(\"reduced\");\n\n    if (!reducedPart) {\n      return;\n    }\n\n    this.$element().toggleClass(REDUCED_APPOINTMENT_CLASS, true).toggleClass(REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\n\n    this._renderAppointmentReducedIcon();\n  },\n  _renderAppointmentReducedIcon: function () {\n    var $icon = (0, _renderer2.default)(\"<div>\").addClass(REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\n\n    var endDate = this._getEndDate();\n\n    var tooltipLabel = _message2.default.format(\"dxScheduler-editorLabelEndDate\");\n\n    var tooltipText = [tooltipLabel, \": \", _date2.default.format(endDate, \"monthAndDay\"), \", \", _date2.default.format(endDate, \"year\")].join(\"\");\n\n    _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\n\n    _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, function () {\n      _ui2.default.show({\n        target: $icon,\n        content: tooltipText\n      });\n    });\n\n    _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\n\n    _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, function () {\n      _ui2.default.hide();\n    });\n  },\n  _getEndDate: function () {\n    var result = this.invoke(\"getField\", \"endDate\", this.option(\"data\"));\n\n    if (result) {\n      return new Date(result);\n    }\n\n    return result;\n  },\n  _renderAllDayClass: function () {\n    this.$element().toggleClass(APPOINTMENT_ALL_DAY_ITEM_CLASS, !!this.option(\"allDay\"));\n  },\n  _renderRecurrenceClass: function () {\n    var rule = this.invoke(\"getField\", \"recurrenceRule\", this.option(\"data\"));\n\n    if (_utils2.default.getRecurrenceRule(rule).isValid) {\n      this.$element().addClass(RECURRENCE_APPOINTMENT_CLASS);\n    }\n  },\n  _renderCompactClass: function () {\n    this.$element().toggleClass(COMPACT_APPOINTMENT_CLASS, !!this.option(\"isCompact\"));\n  },\n  _renderDirection: function () {\n    this.$element().addClass(DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")]);\n  },\n  _createResizingConfig: function () {\n    var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\n    config.roundStepValue = true;\n\n    if (!this.invoke(\"isGroupedByDate\")) {\n      config.stepPrecision = \"strict\";\n    }\n\n    return config;\n  },\n  _renderResizable: function () {\n    if (this.option(\"allowResize\") && !this.option(\"isCompact\")) {\n      this._createComponent(this.$element(), _resizable2.default, (0, _extend.extend)(this._createResizingConfig(), this.option(\"resizableConfig\")));\n    }\n  }\n}).include(_uiScheduler2.default);\n\n(0, _component_registrator2.default)(\"dxSchedulerAppointment\", Appointment);\nmodule.exports = Appointment;","map":{"version":3,"sources":["C:/Users/Swizzle/Desktop/SE Project/Application/csh/node_modules/devextreme/ui/scheduler/ui.scheduler.appointment.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_translator","_translator2","_utils","_utils2","_extend","_component_registrator","_component_registrator2","_ui","_ui2","_uiScheduler","_uiScheduler2","_utils3","_utils4","_pointer","_pointer2","_dom_component","_dom_component2","_resizable","_resizable2","_message","_message2","_date","_date2","obj","__esModule","DEFAULT_HORIZONTAL_HANDLES","DEFAULT_VERTICAL_HANDLES","REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME","default","addNamespace","enter","REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME","leave","EMPTY_APPOINTMENT_CLASS","APPOINTMENT_ALL_DAY_ITEM_CLASS","DIRECTION_APPOINTMENT_CLASSES","horizontal","vertical","RECURRENCE_APPOINTMENT_CLASS","COMPACT_APPOINTMENT_CLASS","REDUCED_APPOINTMENT_CLASS","REDUCED_APPOINTMENT_ICON","REDUCED_APPOINTMENT_PARTS_CLASSES","head","body","tail","Appointment","inherit","_getDefaultOptions","extend","callBase","data","geometry","top","left","width","height","allowDrag","allowResize","reduced","isCompact","direction","resizableConfig","cellHeight","cellWidth","_optionChanged","args","name","_invalidate","_getHorizontalResizingRule","reducedHandles","option","handles","minHeight","minWidth","invoke","step","_getVerticalResizingRule","_render","_renderAppointmentGeometry","_renderEmptyClass","_renderCompactClass","_renderReducedAppointment","_renderAllDayClass","_renderDirection","$element","attr","_renderRecurrenceClass","_renderResizable","move","css","empty","addClass","reducedPart","toggleClass","_renderAppointmentReducedIcon","$icon","appendTo","endDate","_getEndDate","tooltipLabel","format","tooltipText","join","off","on","show","target","content","hide","result","Date","rule","getRecurrenceRule","isValid","_createResizingConfig","config","roundStepValue","stepPrecision","_createComponent","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _utils = require(\"./utils.recurrence\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _ui = require(\"../tooltip/ui.tooltip\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\r\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\r\nvar _utils3 = require(\"../../events/utils\");\r\nvar _utils4 = _interopRequireDefault(_utils3);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _dom_component = require(\"../../core/dom_component\");\r\nvar _dom_component2 = _interopRequireDefault(_dom_component);\r\nvar _resizable = require(\"../resizable\");\r\nvar _resizable2 = _interopRequireDefault(_resizable);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _date = require(\"../../localization/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\r\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\r\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.enter, \"dxSchedulerAppointment\");\r\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.leave, \"dxSchedulerAppointment\");\r\nvar EMPTY_APPOINTMENT_CLASS = \"dx-scheduler-appointment-empty\";\r\nvar APPOINTMENT_ALL_DAY_ITEM_CLASS = \"dx-scheduler-all-day-appointment\";\r\nvar DIRECTION_APPOINTMENT_CLASSES = {\r\n    horizontal: \"dx-scheduler-appointment-horizontal\",\r\n    vertical: \"dx-scheduler-appointment-vertical\"\r\n};\r\nvar RECURRENCE_APPOINTMENT_CLASS = \"dx-scheduler-appointment-recurrence\";\r\nvar COMPACT_APPOINTMENT_CLASS = \"dx-scheduler-appointment-compact\";\r\nvar REDUCED_APPOINTMENT_CLASS = \"dx-scheduler-appointment-reduced\";\r\nvar REDUCED_APPOINTMENT_ICON = \"dx-scheduler-appointment-reduced-icon\";\r\nvar REDUCED_APPOINTMENT_PARTS_CLASSES = {\r\n    head: \"dx-scheduler-appointment-head\",\r\n    body: \"dx-scheduler-appointment-body\",\r\n    tail: \"dx-scheduler-appointment-tail\"\r\n};\r\nvar Appointment = _dom_component2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            data: {},\r\n            geometry: {\r\n                top: 0,\r\n                left: 0,\r\n                width: 0,\r\n                height: 0\r\n            },\r\n            allowDrag: true,\r\n            allowResize: true,\r\n            reduced: null,\r\n            isCompact: false,\r\n            direction: \"vertical\",\r\n            resizableConfig: {},\r\n            cellHeight: 0,\r\n            cellWidth: 0\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"data\":\r\n            case \"geometry\":\r\n            case \"allowDrag\":\r\n            case \"allowResize\":\r\n            case \"reduced\":\r\n            case \"sortedIndex\":\r\n            case \"isCompact\":\r\n            case \"direction\":\r\n            case \"resizableConfig\":\r\n            case \"cellHeight\":\r\n            case \"cellWidth\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getHorizontalResizingRule: function() {\r\n        var reducedHandles = {\r\n            head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\r\n            body: \"\",\r\n            tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\r\n        };\r\n        return {\r\n            handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\r\n            minHeight: 0,\r\n            minWidth: this.invoke(\"getCellWidth\"),\r\n            step: this.invoke(\"getResizableStep\")\r\n        }\r\n    },\r\n    _getVerticalResizingRule: function() {\r\n        var height = this.invoke(\"getCellHeight\");\r\n        return {\r\n            handles: DEFAULT_VERTICAL_HANDLES,\r\n            minWidth: 0,\r\n            minHeight: height,\r\n            step: height\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderAppointmentGeometry();\r\n        this._renderEmptyClass();\r\n        this._renderCompactClass();\r\n        this._renderReducedAppointment();\r\n        this._renderAllDayClass();\r\n        this._renderDirection();\r\n        this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\r\n        this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.option(\"data\")));\r\n        this.$element().attr(\"role\", \"button\");\r\n        this._renderRecurrenceClass();\r\n        this._renderResizable()\r\n    },\r\n    _renderAppointmentGeometry: function() {\r\n        var geometry = this.option(\"geometry\");\r\n        var $element = this.$element();\r\n        _translator2.default.move($element, {\r\n            top: geometry.top,\r\n            left: geometry.left\r\n        });\r\n        $element.css({\r\n            width: geometry.width < 0 ? 0 : geometry.width,\r\n            height: geometry.height < 0 ? 0 : geometry.height\r\n        })\r\n    },\r\n    _renderEmptyClass: function() {\r\n        var geometry = this.option(\"geometry\");\r\n        if (geometry.empty || this.option(\"isCompact\")) {\r\n            this.$element().addClass(EMPTY_APPOINTMENT_CLASS)\r\n        }\r\n    },\r\n    _renderReducedAppointment: function() {\r\n        var reducedPart = this.option(\"reduced\");\r\n        if (!reducedPart) {\r\n            return\r\n        }\r\n        this.$element().toggleClass(REDUCED_APPOINTMENT_CLASS, true).toggleClass(REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\r\n        this._renderAppointmentReducedIcon()\r\n    },\r\n    _renderAppointmentReducedIcon: function() {\r\n        var $icon = (0, _renderer2.default)(\"<div>\").addClass(REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\r\n        var endDate = this._getEndDate();\r\n        var tooltipLabel = _message2.default.format(\"dxScheduler-editorLabelEndDate\");\r\n        var tooltipText = [tooltipLabel, \": \", _date2.default.format(endDate, \"monthAndDay\"), \", \", _date2.default.format(endDate, \"year\")].join(\"\");\r\n        _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\r\n        _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, function() {\r\n            _ui2.default.show({\r\n                target: $icon,\r\n                content: tooltipText\r\n            })\r\n        });\r\n        _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\r\n        _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, function() {\r\n            _ui2.default.hide()\r\n        })\r\n    },\r\n    _getEndDate: function() {\r\n        var result = this.invoke(\"getField\", \"endDate\", this.option(\"data\"));\r\n        if (result) {\r\n            return new Date(result)\r\n        }\r\n        return result\r\n    },\r\n    _renderAllDayClass: function() {\r\n        this.$element().toggleClass(APPOINTMENT_ALL_DAY_ITEM_CLASS, !!this.option(\"allDay\"))\r\n    },\r\n    _renderRecurrenceClass: function() {\r\n        var rule = this.invoke(\"getField\", \"recurrenceRule\", this.option(\"data\"));\r\n        if (_utils2.default.getRecurrenceRule(rule).isValid) {\r\n            this.$element().addClass(RECURRENCE_APPOINTMENT_CLASS)\r\n        }\r\n    },\r\n    _renderCompactClass: function() {\r\n        this.$element().toggleClass(COMPACT_APPOINTMENT_CLASS, !!this.option(\"isCompact\"))\r\n    },\r\n    _renderDirection: function() {\r\n        this.$element().addClass(DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")])\r\n    },\r\n    _createResizingConfig: function() {\r\n        var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\r\n        config.roundStepValue = true;\r\n        if (!this.invoke(\"isGroupedByDate\")) {\r\n            config.stepPrecision = \"strict\"\r\n        }\r\n        return config\r\n    },\r\n    _renderResizable: function() {\r\n        if (this.option(\"allowResize\") && !this.option(\"isCompact\")) {\r\n            this._createComponent(this.$element(), _resizable2.default, (0, _extend.extend)(this._createResizingConfig(), this.option(\"resizableConfig\")))\r\n        }\r\n    }\r\n}).include(_uiScheduler2.default);\r\n(0, _component_registrator2.default)(\"dxSchedulerAppointment\", Appointment);\r\nmodule.exports = Appointment;\r\n"]},"metadata":{},"sourceType":"script"}