{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar isNumeric = require(\"../../core/utils/type\").isNumeric;\n\nvar errors = require(\"../widget/ui.errors\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar devices = require(\"../../core/devices\");\n\nvar Widget = require(\"../widget/ui.widget\");\n\nvar Button = require(\"../button\");\n\nvar Calendar = require(\"../calendar\");\n\nvar Popover = require(\"../popover\");\n\nvar Popup = require(\"../popup\");\n\nvar publisherMixin = require(\"./ui.scheduler.publisher_mixin\");\n\nvar dateLocalization = require(\"../../localization/date\");\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\nvar MONDAY_INDEX = 1;\n\nvar getDefaultFirstDayOfWeekIndex = function (shift) {\n  return shift ? MONDAY_INDEX : dateLocalization.firstDayOfWeekIndex();\n};\n\nvar getDateMonthFormat = function (short) {\n  return function (date) {\n    var monthName = dateLocalization.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\n    return [dateLocalization.format(date, \"day\"), monthName].join(\" \");\n  };\n};\n\nvar getMonthYearFormat = function (date) {\n  return dateLocalization.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + dateLocalization.format(date, \"year\");\n};\n\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\n  var dateMonthFormat = getDateMonthFormat(short);\n  return function (date) {\n    if (intervalCount > 1) {\n      var lastIntervalDate = new Date(date);\n      var defaultViewDuration = duration;\n      lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\n      var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\n      var useShortFormat = isDifferentMonthDates || short;\n      var firstWeekDateText = dateLocalization.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n      var lastWeekDateText = dateLocalization.format(lastIntervalDate, getCaptionFormat(useShortFormat));\n      return firstWeekDateText + \"-\" + lastWeekDateText;\n    }\n\n    return [dateMonthFormat(date), dateLocalization.format(date, \"year\")].join(\" \");\n  };\n};\n\nvar getWeekCaption = function (date, shift, rejectWeekend) {\n  var firstDayOfWeek = this.option(\"firstDayOfWeek\");\n  var firstDayOfWeekIndex = isDefined(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\n\n  if (0 === firstDayOfWeekIndex && rejectWeekend) {\n    firstDayOfWeekIndex = MONDAY_INDEX;\n  }\n\n  var firstWeekDate = dateUtils.getFirstWeekDate(date, firstDayOfWeekIndex);\n  var weekendDuration = 2;\n\n  if (rejectWeekend) {\n    firstWeekDate = dateUtils.normalizeDateByWeek(firstWeekDate, date);\n  }\n\n  if (firstDayOfWeek >= 6 && rejectWeekend) {\n    firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1));\n  }\n\n  var lastWeekDate = new Date(firstWeekDate);\n  var intervalCount = this.option(\"intervalCount\");\n  shift = shift || 6;\n  lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\n\n  if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\n    lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration);\n  }\n\n  return {\n    text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\n    startDate: firstWeekDate,\n    endDate: lastWeekDate\n  };\n};\n\nvar formatCaptionByMonths = function (lastDate, firstDate) {\n  var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\n  var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\n  var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\n  var lastDateText;\n  var firstDateText;\n\n  if (isDifferentYears) {\n    firstDateText = dateLocalization.format(firstDate, getCaptionFormat(true));\n    lastDateText = dateLocalization.format(lastDate, getCaptionFormat(true));\n  } else {\n    firstDateText = dateLocalization.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n    lastDateText = dateLocalization.format(lastDate, getCaptionFormat(useShortFormat));\n  }\n\n  return firstDateText + \"-\" + lastDateText;\n};\n\nvar getMonthCaption = function (date) {\n  var firstDate = new Date(dateUtils.getFirstMonthDate(date));\n  var lastDate = new Date(dateUtils.getLastMonthDate(firstDate));\n  var text;\n\n  if (this.option(\"intervalCount\") > 1) {\n    lastDate = new Date(firstDate);\n    lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\n    lastDate = new Date(dateUtils.getLastMonthDate(lastDate));\n    var isSameYear = firstDate.getYear() === lastDate.getYear();\n    var lastDateText = getMonthYearFormat(lastDate);\n    var firstDateText = isSameYear ? dateLocalization.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\n    text = firstDateText + \"-\" + lastDateText;\n  } else {\n    text = dateLocalization.format(date, \"monthandyear\");\n  }\n\n  return {\n    text: text,\n    startDate: firstDate,\n    endDate: lastDate\n  };\n};\n\nvar dateGetter = function (date, offset) {\n  return new Date(date[this.setter](date[this.getter]() + offset));\n};\n\nvar getConfig = function (step) {\n  var agendaDuration;\n\n  switch (step) {\n    case \"day\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\n          return {\n            text: dateLocalization.format(date, format),\n            startDate: date,\n            endDate: date\n          };\n        }\n      };\n\n    case \"week\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: getWeekCaption\n      };\n\n    case \"workWeek\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          return getWeekCaption.call(this, date, 4, true);\n        }\n      };\n\n    case \"month\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setMonth\",\n        getter: \"getMonth\",\n        getDate: function (date, offset) {\n          var currentDate = date.getDate();\n          date.setDate(1);\n          date = dateGetter.call(this, date, offset);\n          var lastDate = dateUtils.getLastMonthDay(date);\n          date.setDate(currentDate < lastDate ? currentDate : lastDate);\n          return date;\n        },\n        getCaption: getMonthCaption\n      };\n\n    case \"agenda\":\n      agendaDuration = this.invoke(\"getAgendaDuration\");\n      agendaDuration = isNumeric(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\n      return {\n        duration: agendaDuration,\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\n          var firstDate = new Date(date);\n          var lastDate = new Date(date);\n          var text;\n\n          if (agendaDuration > 1) {\n            lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\n            text = formatCaptionByMonths.call(this, lastDate, date);\n          } else {\n            text = dateLocalization.format(date, format);\n          }\n\n          return {\n            text: text,\n            startDate: firstDate,\n            endDate: lastDate\n          };\n        }\n      };\n  }\n};\n\nvar SchedulerNavigator = Widget.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      date: new Date(),\n      displayedDate: void 0,\n      step: \"day\",\n      intervalCount: 1,\n      min: void 0,\n      max: void 0,\n      firstDayOfWeek: void 0,\n      _useShortDateFormat: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return !devices.real().generic || devices.isSimulator();\n      },\n      options: {\n        _useShortDateFormat: true\n      }\n    }]);\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"step\":\n      case \"date\":\n      case \"intervalCount\":\n      case \"displayedDate\":\n        this._updateButtonsState();\n\n        this._renderCaption();\n\n        this._setCalendarOption(\"value\", this.option(\"date\"));\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this._updateButtonsState();\n\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"customizeDateNavigatorText\":\n        this._renderCaption();\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._next.option(args.name, args.value);\n\n        this._caption.option(args.name, args.value);\n\n        this._prev.option(args.name, args.value);\n\n        this._setCalendarOption(args.name, args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"_useShortDateFormat\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _init: function () {\n    this.callBase();\n    this.$element().addClass(ELEMENT_CLASS);\n\n    this._initButtons();\n  },\n  _initButtons: function () {\n    var $next = $(\"<div>\").addClass(NEXT_BUTTON_CLASS);\n    this._next = this._createComponent($next, Button, {\n      icon: \"chevronnext\",\n      onClick: this._updateCurrentDate.bind(this, 1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $caption = $(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\n    this._caption = this._createComponent($caption, Button, {\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $prev = $(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\n    this._prev = this._createComponent($prev, Button, {\n      icon: \"chevronprev\",\n      onClick: this._updateCurrentDate.bind(this, -1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    this.setAria(\"label\", \"Next period\", $next);\n    this.setAria(\"label\", \"Previous period\", $prev);\n\n    this._updateButtonsState();\n\n    this.$element().append($prev, $caption, $next);\n  },\n  _updateButtonsState: function () {\n    var min = this.option(\"min\");\n    var max = this.option(\"max\");\n\n    var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\n\n    min = min ? dateUtils.trimTime(min) : min;\n    max = max ? dateUtils.trimTime(max) : max;\n    max && max.setHours(23, 59, 59);\n\n    this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\n\n    this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max);\n  },\n  _updateCurrentDate: function (direction) {\n    var date = this._getNextDate(direction);\n\n    dateUtils.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\n    this.notifyObserver(\"currentDateUpdated\", date);\n  },\n  _getNextDate: function (direction) {\n    var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\n\n    var stepConfig = this._getConfig();\n\n    var offset = stepConfig.duration * direction;\n    var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\n    return date;\n  },\n  _renderFocusTarget: noop,\n  _initMarkup: function () {\n    this.callBase();\n\n    this._renderCaption();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderPopover();\n\n    this._renderCaptionKeys();\n  },\n  _renderPopover: function () {\n    var overlayType = !devices.current().generic ? Popup : Popover;\n    var popoverContainer = $(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\n    this._popover = this._createComponent(popoverContainer, overlayType, {\n      onContentReady: this._popoverContentReadyHandler.bind(this),\n      defaultOptionsRules: [{\n        device: function () {\n          return !devices.current().generic;\n        },\n        options: {\n          fullScreen: true,\n          showCloseButton: false,\n          toolbarItems: [{\n            shortcut: \"cancel\"\n          }]\n        }\n      }, {\n        device: function () {\n          return devices.current().generic;\n        },\n        options: {\n          target: this._caption.$element()\n        }\n      }]\n    });\n\n    this._popover.$element().appendTo(this.$element());\n  },\n  _popoverContentReadyHandler: function () {\n    this._calendar = this._createComponent($(\"<div>\"), Calendar, this._calendarOptions());\n\n    this._calendar.$element().addClass(CALENDAR_CLASS);\n\n    this._popover.$content().append(this._calendar.$element());\n  },\n  _calendarOptions: function () {\n    return {\n      min: this.option(\"min\"),\n      max: this.option(\"max\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      value: this.option(\"date\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      onValueChanged: function (e) {\n        if (!this.option(\"visible\")) {\n          return;\n        }\n\n        this.notifyObserver(\"currentDateUpdated\", e.value);\n\n        this._popover.hide();\n      }.bind(this),\n      hasFocus: function () {\n        return true;\n      },\n      tabIndex: null,\n      _keyboardProcessor: this._calendarKeyboardProcessor\n    };\n  },\n  _renderCaption: function () {\n    var date = this.option(\"displayedDate\") || this.option(\"date\");\n\n    var captionConfig = this._getConfig().getCaption.call(this, date);\n\n    var customizationFunction = this.option(\"customizeDateNavigatorText\");\n    var caption = typeUtils.isFunction(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\n\n    this._caption.option({\n      text: caption,\n      onClick: function () {\n        this._popover.toggle();\n      }.bind(this)\n    });\n  },\n  _renderCaptionKeys: function () {\n    if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\n      return;\n    }\n\n    this._calendarKeyboardProcessor = this._caption._keyboardProcessor.attachChildProcessor();\n\n    this._setCalendarOption(\"_keyboardProcessor\", this._calendarKeyboardProcessor);\n\n    var that = this;\n\n    var executeHandler = function () {\n      if (that._popover.$content().is(\":hidden\")) {\n        that._popover.show();\n      } else {\n        return true;\n      }\n    };\n\n    var tabHandler = function () {\n      that._popover.hide();\n    };\n\n    this._caption.registerKeyHandler(\"enter\", executeHandler);\n\n    this._caption.registerKeyHandler(\"space\", executeHandler);\n\n    this._caption.registerKeyHandler(\"tab\", tabHandler);\n  },\n  _setCalendarOption: function (name, value) {\n    if (this._calendar) {\n      this._calendar.option(name, value);\n    }\n  },\n  _getConfig: function () {\n    var step = this.option(\"step\");\n    var config = getConfig.call(this, step);\n\n    if (!config) {\n      throw errors.Error(\"E1033\", step);\n    }\n\n    return config;\n  }\n}).include(publisherMixin);\nregisterComponent(\"dxSchedulerNavigator\", SchedulerNavigator);\nmodule.exports = SchedulerNavigator;","map":{"version":3,"sources":["C:/Users/Swizzle/Desktop/SE Project/Application/csh/node_modules/devextreme/ui/scheduler/ui.scheduler.navigator.js"],"names":["$","require","noop","isNumeric","errors","dateUtils","typeUtils","extend","registerComponent","devices","Widget","Button","Calendar","Popover","Popup","publisherMixin","dateLocalization","isDefined","ELEMENT_CLASS","CALENDAR_CLASS","NEXT_BUTTON_CLASS","CAPTION_BUTTON_CLASS","PREVIOUS_BUTTON_CLASS","CALENDAR_POPOVER_CLASS","MONDAY_INDEX","getDefaultFirstDayOfWeekIndex","shift","firstDayOfWeekIndex","getDateMonthFormat","short","date","monthName","getMonthNames","getMonth","format","join","getMonthYearFormat","getCaptionFormat","intervalCount","duration","dateMonthFormat","lastIntervalDate","Date","defaultViewDuration","setDate","getDate","isDifferentMonthDates","useShortFormat","firstWeekDateText","lastWeekDateText","getWeekCaption","rejectWeekend","firstDayOfWeek","option","firstWeekDate","getFirstWeekDate","weekendDuration","normalizeDateByWeek","lastWeekDate","getDay","text","formatCaptionByMonths","call","startDate","endDate","lastDate","firstDate","isDifferentYears","getFullYear","lastDateText","firstDateText","getMonthCaption","getFirstMonthDate","getLastMonthDate","setMonth","isSameYear","getYear","dateGetter","offset","setter","getter","getConfig","step","agendaDuration","getCaption","_getConfig","currentDate","getLastMonthDay","invoke","SchedulerNavigator","inherit","_getDefaultOptions","callBase","displayedDate","min","max","_useShortDateFormat","_defaultOptionsRules","concat","device","real","generic","isSimulator","options","_optionChanged","args","name","_updateButtonsState","_renderCaption","_setCalendarOption","value","_next","_caption","_prev","_init","$element","addClass","_initButtons","$next","_createComponent","icon","onClick","_updateCurrentDate","bind","focusStateEnabled","tabIndex","integrationOptions","$caption","$prev","setAria","append","caption","trimTime","setHours","isNaN","getTime","_getNextDate","direction","normalizeDate","notifyObserver","initialDate","arguments","length","stepConfig","_renderFocusTarget","_initMarkup","_render","_renderPopover","_renderCaptionKeys","overlayType","current","popoverContainer","_popover","onContentReady","_popoverContentReadyHandler","defaultOptionsRules","fullScreen","showCloseButton","toolbarItems","shortcut","target","appendTo","_calendar","_calendarOptions","$content","onValueChanged","e","hide","hasFocus","_keyboardProcessor","_calendarKeyboardProcessor","captionConfig","customizationFunction","isFunction","toggle","attachChildProcessor","that","executeHandler","is","show","tabHandler","registerKeyHandler","config","Error","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar isNumeric = require(\"../../core/utils/type\").isNumeric;\r\nvar errors = require(\"../widget/ui.errors\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar devices = require(\"../../core/devices\");\r\nvar Widget = require(\"../widget/ui.widget\");\r\nvar Button = require(\"../button\");\r\nvar Calendar = require(\"../calendar\");\r\nvar Popover = require(\"../popover\");\r\nvar Popup = require(\"../popup\");\r\nvar publisherMixin = require(\"./ui.scheduler.publisher_mixin\");\r\nvar dateLocalization = require(\"../../localization/date\");\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\r\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\r\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\r\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\r\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\r\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\r\nvar MONDAY_INDEX = 1;\r\nvar getDefaultFirstDayOfWeekIndex = function(shift) {\r\n    return shift ? MONDAY_INDEX : dateLocalization.firstDayOfWeekIndex()\r\n};\r\nvar getDateMonthFormat = function(short) {\r\n    return function(date) {\r\n        var monthName = dateLocalization.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\r\n        return [dateLocalization.format(date, \"day\"), monthName].join(\" \")\r\n    }\r\n};\r\nvar getMonthYearFormat = function(date) {\r\n    return dateLocalization.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + dateLocalization.format(date, \"year\")\r\n};\r\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\r\n    var dateMonthFormat = getDateMonthFormat(short);\r\n    return function(date) {\r\n        if (intervalCount > 1) {\r\n            var lastIntervalDate = new Date(date);\r\n            var defaultViewDuration = duration;\r\n            lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\r\n            var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\r\n            var useShortFormat = isDifferentMonthDates || short;\r\n            var firstWeekDateText = dateLocalization.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n            var lastWeekDateText = dateLocalization.format(lastIntervalDate, getCaptionFormat(useShortFormat));\r\n            return firstWeekDateText + \"-\" + lastWeekDateText\r\n        }\r\n        return [dateMonthFormat(date), dateLocalization.format(date, \"year\")].join(\" \")\r\n    }\r\n};\r\nvar getWeekCaption = function(date, shift, rejectWeekend) {\r\n    var firstDayOfWeek = this.option(\"firstDayOfWeek\");\r\n    var firstDayOfWeekIndex = isDefined(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\r\n    if (0 === firstDayOfWeekIndex && rejectWeekend) {\r\n        firstDayOfWeekIndex = MONDAY_INDEX\r\n    }\r\n    var firstWeekDate = dateUtils.getFirstWeekDate(date, firstDayOfWeekIndex);\r\n    var weekendDuration = 2;\r\n    if (rejectWeekend) {\r\n        firstWeekDate = dateUtils.normalizeDateByWeek(firstWeekDate, date)\r\n    }\r\n    if (firstDayOfWeek >= 6 && rejectWeekend) {\r\n        firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1))\r\n    }\r\n    var lastWeekDate = new Date(firstWeekDate);\r\n    var intervalCount = this.option(\"intervalCount\");\r\n    shift = shift || 6;\r\n    lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\r\n    if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\r\n        lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration)\r\n    }\r\n    return {\r\n        text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\r\n        startDate: firstWeekDate,\r\n        endDate: lastWeekDate\r\n    }\r\n};\r\nvar formatCaptionByMonths = function(lastDate, firstDate) {\r\n    var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\r\n    var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\r\n    var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\r\n    var lastDateText;\r\n    var firstDateText;\r\n    if (isDifferentYears) {\r\n        firstDateText = dateLocalization.format(firstDate, getCaptionFormat(true));\r\n        lastDateText = dateLocalization.format(lastDate, getCaptionFormat(true))\r\n    } else {\r\n        firstDateText = dateLocalization.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n        lastDateText = dateLocalization.format(lastDate, getCaptionFormat(useShortFormat))\r\n    }\r\n    return firstDateText + \"-\" + lastDateText\r\n};\r\nvar getMonthCaption = function(date) {\r\n    var firstDate = new Date(dateUtils.getFirstMonthDate(date));\r\n    var lastDate = new Date(dateUtils.getLastMonthDate(firstDate));\r\n    var text;\r\n    if (this.option(\"intervalCount\") > 1) {\r\n        lastDate = new Date(firstDate);\r\n        lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\r\n        lastDate = new Date(dateUtils.getLastMonthDate(lastDate));\r\n        var isSameYear = firstDate.getYear() === lastDate.getYear();\r\n        var lastDateText = getMonthYearFormat(lastDate);\r\n        var firstDateText = isSameYear ? dateLocalization.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\r\n        text = firstDateText + \"-\" + lastDateText\r\n    } else {\r\n        text = dateLocalization.format(date, \"monthandyear\")\r\n    }\r\n    return {\r\n        text: text,\r\n        startDate: firstDate,\r\n        endDate: lastDate\r\n    }\r\n};\r\nvar dateGetter = function(date, offset) {\r\n    return new Date(date[this.setter](date[this.getter]() + offset))\r\n};\r\nvar getConfig = function(step) {\r\n    var agendaDuration;\r\n    switch (step) {\r\n        case \"day\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\r\n                    return {\r\n                        text: dateLocalization.format(date, format),\r\n                        startDate: date,\r\n                        endDate: date\r\n                    }\r\n                }\r\n            };\r\n        case \"week\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: getWeekCaption\r\n            };\r\n        case \"workWeek\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    return getWeekCaption.call(this, date, 4, true)\r\n                }\r\n            };\r\n        case \"month\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setMonth\", getter: \"getMonth\", getDate: function(date, offset) {\r\n                    var currentDate = date.getDate();\r\n                    date.setDate(1);\r\n                    date = dateGetter.call(this, date, offset);\r\n                    var lastDate = dateUtils.getLastMonthDay(date);\r\n                    date.setDate(currentDate < lastDate ? currentDate : lastDate);\r\n                    return date\r\n                }, getCaption: getMonthCaption\r\n            };\r\n        case \"agenda\":\r\n            agendaDuration = this.invoke(\"getAgendaDuration\");\r\n            agendaDuration = isNumeric(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\r\n            return {\r\n                duration: agendaDuration, setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\r\n                    var firstDate = new Date(date);\r\n                    var lastDate = new Date(date);\r\n                    var text;\r\n                    if (agendaDuration > 1) {\r\n                        lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\r\n                        text = formatCaptionByMonths.call(this, lastDate, date)\r\n                    } else {\r\n                        text = dateLocalization.format(date, format)\r\n                    }\r\n                    return {\r\n                        text: text,\r\n                        startDate: firstDate,\r\n                        endDate: lastDate\r\n                    }\r\n                }\r\n            }\r\n    }\r\n};\r\nvar SchedulerNavigator = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            date: new Date,\r\n            displayedDate: void 0,\r\n            step: \"day\",\r\n            intervalCount: 1,\r\n            min: void 0,\r\n            max: void 0,\r\n            firstDayOfWeek: void 0,\r\n            _useShortDateFormat: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !devices.real().generic || devices.isSimulator()\r\n            },\r\n            options: {\r\n                _useShortDateFormat: true\r\n            }\r\n        }])\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"step\":\r\n            case \"date\":\r\n            case \"intervalCount\":\r\n            case \"displayedDate\":\r\n                this._updateButtonsState();\r\n                this._renderCaption();\r\n                this._setCalendarOption(\"value\", this.option(\"date\"));\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this._updateButtonsState();\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"customizeDateNavigatorText\":\r\n                this._renderCaption();\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._next.option(args.name, args.value);\r\n                this._caption.option(args.name, args.value);\r\n                this._prev.option(args.name, args.value);\r\n                this._setCalendarOption(args.name, args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"_useShortDateFormat\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(ELEMENT_CLASS);\r\n        this._initButtons()\r\n    },\r\n    _initButtons: function() {\r\n        var $next = $(\"<div>\").addClass(NEXT_BUTTON_CLASS);\r\n        this._next = this._createComponent($next, Button, {\r\n            icon: \"chevronnext\",\r\n            onClick: this._updateCurrentDate.bind(this, 1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $caption = $(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\r\n        this._caption = this._createComponent($caption, Button, {\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $prev = $(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\r\n        this._prev = this._createComponent($prev, Button, {\r\n            icon: \"chevronprev\",\r\n            onClick: this._updateCurrentDate.bind(this, -1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        this.setAria(\"label\", \"Next period\", $next);\r\n        this.setAria(\"label\", \"Previous period\", $prev);\r\n        this._updateButtonsState();\r\n        this.$element().append($prev, $caption, $next)\r\n    },\r\n    _updateButtonsState: function() {\r\n        var min = this.option(\"min\");\r\n        var max = this.option(\"max\");\r\n        var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\r\n        min = min ? dateUtils.trimTime(min) : min;\r\n        max = max ? dateUtils.trimTime(max) : max;\r\n        max && max.setHours(23, 59, 59);\r\n        this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\r\n        this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max)\r\n    },\r\n    _updateCurrentDate: function(direction) {\r\n        var date = this._getNextDate(direction);\r\n        dateUtils.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\r\n        this.notifyObserver(\"currentDateUpdated\", date)\r\n    },\r\n    _getNextDate: function(direction) {\r\n        var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\r\n        var stepConfig = this._getConfig();\r\n        var offset = stepConfig.duration * direction;\r\n        var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\r\n        return date\r\n    },\r\n    _renderFocusTarget: noop,\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._renderCaption()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderPopover();\r\n        this._renderCaptionKeys()\r\n    },\r\n    _renderPopover: function() {\r\n        var overlayType = !devices.current().generic ? Popup : Popover;\r\n        var popoverContainer = $(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\r\n        this._popover = this._createComponent(popoverContainer, overlayType, {\r\n            onContentReady: this._popoverContentReadyHandler.bind(this),\r\n            defaultOptionsRules: [{\r\n                device: function() {\r\n                    return !devices.current().generic\r\n                },\r\n                options: {\r\n                    fullScreen: true,\r\n                    showCloseButton: false,\r\n                    toolbarItems: [{\r\n                        shortcut: \"cancel\"\r\n                    }]\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return devices.current().generic\r\n                },\r\n                options: {\r\n                    target: this._caption.$element()\r\n                }\r\n            }]\r\n        });\r\n        this._popover.$element().appendTo(this.$element())\r\n    },\r\n    _popoverContentReadyHandler: function() {\r\n        this._calendar = this._createComponent($(\"<div>\"), Calendar, this._calendarOptions());\r\n        this._calendar.$element().addClass(CALENDAR_CLASS);\r\n        this._popover.$content().append(this._calendar.$element())\r\n    },\r\n    _calendarOptions: function() {\r\n        return {\r\n            min: this.option(\"min\"),\r\n            max: this.option(\"max\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            value: this.option(\"date\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            onValueChanged: function(e) {\r\n                if (!this.option(\"visible\")) {\r\n                    return\r\n                }\r\n                this.notifyObserver(\"currentDateUpdated\", e.value);\r\n                this._popover.hide()\r\n            }.bind(this),\r\n            hasFocus: function() {\r\n                return true\r\n            },\r\n            tabIndex: null,\r\n            _keyboardProcessor: this._calendarKeyboardProcessor\r\n        }\r\n    },\r\n    _renderCaption: function() {\r\n        var date = this.option(\"displayedDate\") || this.option(\"date\");\r\n        var captionConfig = this._getConfig().getCaption.call(this, date);\r\n        var customizationFunction = this.option(\"customizeDateNavigatorText\");\r\n        var caption = typeUtils.isFunction(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\r\n        this._caption.option({\r\n            text: caption,\r\n            onClick: function() {\r\n                this._popover.toggle()\r\n            }.bind(this)\r\n        })\r\n    },\r\n    _renderCaptionKeys: function() {\r\n        if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        this._calendarKeyboardProcessor = this._caption._keyboardProcessor.attachChildProcessor();\r\n        this._setCalendarOption(\"_keyboardProcessor\", this._calendarKeyboardProcessor);\r\n        var that = this;\r\n        var executeHandler = function() {\r\n            if (that._popover.$content().is(\":hidden\")) {\r\n                that._popover.show()\r\n            } else {\r\n                return true\r\n            }\r\n        };\r\n        var tabHandler = function() {\r\n            that._popover.hide()\r\n        };\r\n        this._caption.registerKeyHandler(\"enter\", executeHandler);\r\n        this._caption.registerKeyHandler(\"space\", executeHandler);\r\n        this._caption.registerKeyHandler(\"tab\", tabHandler)\r\n    },\r\n    _setCalendarOption: function(name, value) {\r\n        if (this._calendar) {\r\n            this._calendar.option(name, value)\r\n        }\r\n    },\r\n    _getConfig: function() {\r\n        var step = this.option(\"step\");\r\n        var config = getConfig.call(this, step);\r\n        if (!config) {\r\n            throw errors.Error(\"E1033\", step)\r\n        }\r\n        return config\r\n    }\r\n}).include(publisherMixin);\r\nregisterComponent(\"dxSchedulerNavigator\", SchedulerNavigator);\r\nmodule.exports = SchedulerNavigator;\r\n"]},"metadata":{},"sourceType":"script"}