{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Swizzle\\\\Desktop\\\\SE Project\\\\Application\\\\csh\\\\src\\\\components\\\\CreateCourse.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { createCourse } from '../store/courseActions';\nimport { Redirect } from 'react-router-dom';\n\nclass CreateCourse extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: '',\n      description: '',\n      startDate: '',\n      startTime: '',\n      endDate: '',\n      endTime: '',\n      frequency: 0,\n      trainers: [],\n      skills: [],\n      selected: false,\n      trainer: false\n    };\n\n    this.handleChange = e => {\n      if (e.target.id === \"skills\") {\n        this.setState({\n          selected: true\n        });\n      }\n\n      if (e.target.id === \"trainers\") {\n        this.setState({\n          trainer: true\n        });\n      }\n\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.getDate = () => {\n      var date = new Date();\n      var day = date.getDate();\n      var month = date.getMonth() + 1;\n      var year = date.getFullYear();\n      if (month < 10) month = \"0\" + month;\n      if (day < 10) day = \"0\" + day;\n      var today = year + \"-\" + month + \"-\" + day;\n      return today;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n\n      if (this.state.newTrainer === null) {\n        return;\n      }\n\n      this.props.createCourse(this.state);\n      this.props.history.push('/');\n    };\n\n    this.getTrainers = users => {\n      var trainers = [];\n      users && users.forEach(user => {\n        if (user.userType === \"trainer\") {\n          trainers.push(user);\n        }\n      });\n      return trainers;\n    };\n\n    this.skills = trainers => {\n      var trainers = [];\n      users && users.forEach(user => {\n        if (user.userType === \"trainer\") {\n          trainers.push(user);\n        }\n      });\n      var skills = [];\n      trainers && trainers.forEach(trainer => {\n        trainer.skills && trainer.skills.forEach(skill => {\n          trainerWithSkill = {\n            trainer: trainer,\n            skill: skill.skill\n          };\n\n          if (!skills.includes(trainerWithSkill)) {\n            skills.push(trainerWithSkill);\n          }\n        });\n      });\n      return skills;\n    };\n\n    this.getBlockedTimes = (trainer, courses) => {\n      var times = [];\n      courses && courses.forEach(course => {\n        if (course.trainers === trainer) {\n          times.push(course.startDate + \" at \" + course.startTime + \" to \" + course.endDate + \" at \" + course.endTime);\n        }\n      });\n      return times;\n    };\n  }\n\n  render() {\n    const {\n      auth,\n      users,\n      courses\n    } = this.props;\n    const trainers = this.getTrainers(users);\n    const skills = this.skills(trainers);\n    if (!auth.uid) return React.createElement(Redirect, {\n      to: \"/signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"grey-text text-darken-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Create Course\"), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"title\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"textarea\", {\n      id: \"description\",\n      className: \"materialize-textarea\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"frequency\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Frequency\"), React.createElement(\"input\", {\n      type: \"number\",\n      id: \"frequency\",\n      name: \"quantity\",\n      min: \"1\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Choose a Skill\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      id: \"skills\",\n      className: \"browser-default\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      disabled: true,\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), skills.map(skill => {\n      return React.createElement(\"option\", {\n        value: skill.skill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, skill.skill);\n    }))), this.state.selected && React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Choose a Trainer\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      id: \"trainers\",\n      className: \"browser-default\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      disabled: true,\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), skills.map(trainer => {\n      return React.createElement(\"option\", {\n        value: skills.trainer.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, trainer.firstName + \" \" + trainer.lastName);\n    }))), this.state.trainer && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"grey-text text-darken-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Choose a Time\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"This trainer is unavailable during these times:\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, this.getBlockedTimes(this.state.trainers, courses).map(time => {\n      return React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, time);\n    }))), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"startDate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Start date\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"date\",\n      id: \"startDate\",\n      min: this.getDate(),\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"startTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Start Time (ex: 14:30)\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"startTime\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"endDate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"End date\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"date\",\n      id: \"endDate\",\n      min: this.getDate(),\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"endTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"End Time (ex: 15:30)\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"endTime\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn blue lighten-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Create\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.firebase.auth,\n    users: state.firestore.ordered.users,\n    courses: state.firestore.ordered.courses\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    createCourse: course => dispatch(createCourse(course))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateCourse);","map":{"version":3,"sources":["C:/Users/Swizzle/Desktop/SE Project/Application/csh/src/components/CreateCourse.js"],"names":["React","Component","connect","createCourse","Redirect","CreateCourse","state","title","description","startDate","startTime","endDate","endTime","frequency","trainers","skills","selected","trainer","handleChange","e","target","id","setState","value","getDate","date","Date","day","month","getMonth","year","getFullYear","today","handleSubmit","preventDefault","newTrainer","props","history","push","getTrainers","users","forEach","user","userType","skill","trainerWithSkill","includes","getBlockedTimes","courses","times","course","render","auth","uid","map","firstName","lastName","time","mapStateToProps","firebase","firestore","ordered","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {createCourse} from '../store/courseActions'\r\nimport {Redirect} from 'react-router-dom'\r\n\r\nclass CreateCourse extends Component {\r\n    state = {\r\n        title: '',\r\n        description: '',\r\n        startDate: '',\r\n        startTime: '',\r\n        endDate: '',\r\n        endTime: '',\r\n        frequency: 0,\r\n        trainers: [],\r\n        skills: [],\r\n        selected: false,\r\n        trainer: false\r\n    }\r\n    handleChange = (e) => {\r\n        if(e.target.id === \"skills\"){\r\n            this.setState({\r\n                selected: true\r\n            })\r\n        }\r\n        if(e.target.id === \"trainers\"){\r\n            this.setState({\r\n                trainer: true\r\n            })\r\n        }\r\n        this.setState({\r\n            [e.target.id]: e.target.value  \r\n        })\r\n    }\r\n    getDate = () => {\r\n        var date = new Date();\r\n\r\n        var day = date.getDate();\r\n        var month = date.getMonth() + 1;\r\n        var year = date.getFullYear();\r\n\r\n        if (month < 10) month = \"0\" + month;\r\n        if (day < 10) day = \"0\" + day;\r\n\r\n        var today = year + \"-\" + month + \"-\" + day;       \r\n        return today;\r\n    }\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if(this.state.newTrainer === null){return}\r\n        this.props.createCourse(this.state)\r\n        this.props.history.push('/')\r\n    }\r\n    getTrainers = (users) =>{\r\n        var trainers = []\r\n        users && users.forEach(user => {\r\n            if(user.userType === \"trainer\"){\r\n                trainers.push(user)\r\n            }\r\n        })\r\n        return trainers\r\n    }\r\n    skills = (trainers) => {\r\n        var trainers = []\r\n        users && users.forEach(user => {\r\n            if(user.userType === \"trainer\"){\r\n                trainers.push(user)\r\n            }\r\n        })\r\n        var skills =[]\r\n        trainers && trainers.forEach(trainer => {\r\n            trainer.skills && trainer.skills.forEach(skill => {\r\n                trainerWithSkill = {trainer: trainer, skill: skill.skill}\r\n                if(!skills.includes(trainerWithSkill)){\r\n                    skills.push(trainerWithSkill)\r\n                }\r\n            });\r\n        });\r\n        return skills\r\n    }\r\n    getBlockedTimes = (trainer, courses) => {\r\n        var times =[]\r\n        courses && courses.forEach(course => {\r\n            if(course.trainers === trainer){\r\n                times.push(course.startDate + \" at \" + course.startTime + \" to \" +\r\n                course.endDate + \" at \" + course.endTime)\r\n            }\r\n        });\r\n        return times\r\n    }\r\n\r\n    render() {\r\n        const {auth, users, courses} = this.props;\r\n        const trainers = this.getTrainers(users)\r\n        const skills = this.skills(trainers)  \r\n        if (!auth.uid) return <Redirect to='/signin' />\r\n        return (\r\n            <div className=\"container\">\r\n                <form onSubmit={this.handleSubmit} className=\"white\">\r\n                    <h5 className=\"grey-text text-darken-3\">Create Course</h5>\r\n                    <div className=\"input-field\">\r\n                        <label htmlFor=\"title\">Title</label>\r\n                        <input type=\"text\" id=\"title\" onChange={this.handleChange} required/>\r\n                    </div>\r\n\r\n                    <div className=\"input-field\">\r\n                        <label htmlFor=\"description\">Description</label>\r\n                        <textarea id=\"description\" className=\"materialize-textarea\" onChange={this.handleChange} required></textarea>\r\n                    </div>\r\n\r\n                    <div className=\"input-field\">\r\n                        <label htmlFor=\"frequency\">Frequency</label>\r\n                        <input type=\"number\" id=\"frequency\" name=\"quantity\" min=\"1\" onChange={this.handleChange} required></input>\r\n                    </div>\r\n\r\n                    <div className=\"input-field\">\r\n                        <label>Choose a Skill</label><br/><br/>\r\n                        <select id=\"skills\" className=\"browser-default\" onChange={this.handleChange} required>\r\n                            <option value='' disabled selected></option>\r\n                            {skills.map(skill => {\r\n                                return (\r\n                                    <option value={skill.skill}>{skill.skill}</option>\r\n                                )\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n\r\n                    {this.state.selected &&\r\n                        <div className=\"input-field\">\r\n                            <label>Choose a Trainer</label><br/><br/>\r\n                            <select id=\"trainers\" className=\"browser-default\" onChange={this.handleChange} required>\r\n                                <option value='' disabled selected></option>\r\n                                {skills.map(trainer => {\r\n                                    return (\r\n                                        <option value={skills.trainer.id}>{trainer.firstName + \" \" + trainer.lastName}</option>\r\n                                    )\r\n                                })}\r\n                            </select>\r\n                        </div>\r\n                    }\r\n\r\n                    {this.state.trainer &&\r\n                        <>\r\n                        <div className=\"input-field\">\r\n                            <h5 className=\"grey-text text-darken-3\">Choose a Time</h5>\r\n                            <p>This trainer is unavailable during these times:</p>\r\n                            <ul>\r\n                                {this.getBlockedTimes(this.state.trainers, courses).map(time => {\r\n                                    return (\r\n                                        <li>{time}</li>\r\n                                    )\r\n                                })}\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <div className=\"input-field\">\r\n                        <label htmlFor=\"startDate\">Start date</label><br/><br/>\r\n                        <input type=\"date\" id=\"startDate\" min={this.getDate()}\r\n                            onChange={this.handleChange} required></input> \r\n                        </div>\r\n\r\n                        <div className=\"input-field\">\r\n                            <label htmlFor=\"startTime\">Start Time (ex: 14:30)</label>\r\n                            <input type=\"text\" id=\"startTime\" onChange={this.handleChange} required></input>\r\n                        </div>\r\n\r\n                        <div className=\"input-field\">\r\n                            <label htmlFor=\"endDate\">End date</label><br/><br/>\r\n                            <input type=\"date\" id=\"endDate\" min={this.getDate()}\r\n                                onChange={this.handleChange} required></input>\r\n                        </div>\r\n\r\n                        <div className=\"input-field\">\r\n                            <label htmlFor=\"endTime\">End Time (ex: 15:30)</label>\r\n                            <input type=\"text\" id=\"endTime\" onChange={this.handleChange} required></input>\r\n                        </div></>\r\n\r\n                    }\r\n\r\n                    <div className=\"input-field\">\r\n                        <button className=\"btn blue lighten-1\">Create</button>\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        auth: state.firebase.auth,\r\n        users: state.firestore.ordered.users, \r\n        courses: state.firestore.ordered.courses\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        createCourse: (course) => dispatch(createCourse(course))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateCourse)\r\n"]},"metadata":{},"sourceType":"module"}